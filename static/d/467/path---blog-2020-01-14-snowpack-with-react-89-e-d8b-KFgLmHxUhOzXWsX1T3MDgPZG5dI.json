{"data":{"site":{"siteMetadata":{"title":"Ryan Lanciaux","author":"Ryan Lanciaux"}},"markdownRemark":{"id":"699a8c0c-ae42-5b99-bfcb-58c889039061","excerpt":"In this article, we‚Äôre going to build a React application using  Snowpack .  Snowpack  is one of the technologies I‚Äôm most excited about right now. It‚Äôs a‚Ä¶","html":"\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.0725rem\"\n          >\n            <iframe src=\"https://www.youtube.com/embed/pUUAil_9yIw\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n          </div>\n          \n<p>In this article, we‚Äôre going to build a React application using <a href=\"https://www.snowpack.dev/\">Snowpack</a>. <a href=\"https://www.snowpack.dev/\">Snowpack</a> is one of the technologies I‚Äôm most excited about right now. It‚Äôs a little bit like bundler in that it‚Äôs responsible for preparing an application‚Äôs third-party dependencies for use on the web but it has enough differences to make it a compelling tool to explore. Instead of building every time you save your code, <a href=\"https://www.snowpack.dev/\">Snowpack</a> can do it‚Äôs work after you install a dependency. Lets take a look. (<a href=\"https://github.com/ryanlanciaux/snowpack-demo\">The demo application we‚Äôll be building in this article is available here</a>)</p>\n<h2>Getting started</h2>\n<p>We‚Äôre going to create a new project. Instead of starting our project with Create React App, Gatsby, Next, etc. we‚Äôre simply going to create a new folder, cd into that folder, and run <code class=\"language-text\">npm init</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&gt; mkdir snowpack-demo\n&gt; cd snowpack-demo\n&gt; npm init</code></pre></div>\n<p>Once that‚Äôs complete, we‚Äôre going to install a couple of development dependencies. We‚Äôll start by including <code class=\"language-text\">snowpack</code>, followed by <code class=\"language-text\">@babel/core</code>, <code class=\"language-text\">@babel/cli</code>, and <code class=\"language-text\">@babel/preset-react</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&gt; yarn add --dev snowpack\n&gt; yarn add --dev @babel/core @babel/cli @babel/preset-react</code></pre></div>\n<p>Traditionally, we could run <code class=\"language-text\">snowpack</code> through <code class=\"language-text\">npx</code> but we‚Äôll be using snowpack‚Äôs babel plugin a little later in this example.</p>\n<h2>Why Babel?</h2>\n<p>Speaking of Babel, you might be asking yourself why we‚Äôre using Babel with Snowpack. This is a totally valid question as Babel is usually not required with Snowpack.</p>\n<p>We‚Äôre going to use JSX with our application. Unfortunately, the browser would have no idea how to handle JSX, so we‚Äôre going to use Babel to help translate our code into something that the Browser can understand. Additionally, since we‚Äôre using already using Babel, we‚Äôre going to use Snowpacks‚Äôs optional Babel plugin that will allow us to used named imports rather than importing by URL. What this means is traditionally, with Snowpack, we‚Äôd import React and ReactDOM like this.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"/web_modules/react.js\"</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"/web_modules/react-dom.js\"</span></code></pre></div>\n<p>With the (optional) Babel plugin, we can import our modules in a way that may be more familiar if we‚Äôre used to things like Create React App, etc.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span></code></pre></div>\n<p>Behind the scenes, we‚Äôre still using the files in the <code class=\"language-text\">web_modules</code> directory created by Snowpack. The Babel plugin is translating the name to this path for us.</p>\n<h2>Include React</h2>\n<p>With that out of the way, we‚Äôre going to add React and ReactDOM to our project. Currently, React doesn‚Äôt support ES Modules. Fortunately, some in the community have a version of React that we can use that does support ES Modules (as noted in <a href=\"https://www.snowpack.dev/#react\">the Snowpack docs</a>).</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn add react@npm:@reactesm/react react-dom@npm:@reactesm/react-dom</code></pre></div>\n<p>Now, if we run <code class=\"language-text\">yarn snowpack</code> we can watch Snowpack perform some work against our included modules.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&gt; yarn snowpack\n‚úî snowpack installed: react, react-dom [0.79s]\n‚ú®  Done in 2.03s.</code></pre></div>\n<p>We can take a look at our <code class=\"language-text\">web_modules</code> directory and see that Snowpack created files for our newly included modules and an <a href=\"https://github.com/WICG/import-maps\">import map</a> that we could use for browsers that support them.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&gt; ls web_modules\nimport-map.json\nreact.js\nreact-dom.js</code></pre></div>\n<p>Next, we‚Äôll add <a href=\"https://www.npmjs.com/package/live-server\">live-server</a>, the tool we‚Äôll use to serve our files locally.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn add --dev live-server</code></pre></div>\n<p>We‚Äôre finally ready to start editing our code. We‚Äôll start by creating a boilerplate HTML page. This page will have an element with an id of <code class=\"language-text\">app</code> where we‚Äôll attach our React application. Additionally, we‚Äôll include a JavaScript app that lives in <code class=\"language-text\">lib/app.js</code>. This file doesn‚Äôt exist currently but we‚Äôll take care of that shortly.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\">&lt;!DOCTYPE html></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Hello world example!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>app<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>module<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/lib/app.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>We‚Äôll add a <code class=\"language-text\">.babelrc</code> file where we‚Äôll add our Babel configuration</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"plugins\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"snowpack/assets/babel-plugin.js\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"presets\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"@babel/preset-react\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Next, we‚Äôll create a very basic React application in <code class=\"language-text\">src/app.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Hello everyone<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"app\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>We can run this application in watch mode with the following commands.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn babel src --out-dir lib --watch</code></pre></div>\n<p>This runs babel against our <code class=\"language-text\">src</code> directory and writes the transpiled files to a <code class=\"language-text\">lib</code> directory (what we reference in <code class=\"language-text\">index.html</code>)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn live-server</code></pre></div>\n<p>This command runs live-server to watch our HTML / JavaScript for changes. Generally, I would write a script or use something like <a href=\"https://www.npmjs.com/package/concurrently\">concurrently</a> that would run the two commands together as an <code class=\"language-text\">npm script.</code> For the sake of example, however, I like to focus on these items individually.</p>\n<p>If we navigate to our browser and open the page (by default, localhost:8080) we should be greeted with the following:</p>\n\n  <a class=\"gatsby-resp-image-link\" href=\"/static/6780fd91444e22499021dae0aff334ed/df24b/hello.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n  \n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block;  max-width: 269px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 30.11152416356877%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAxUlEQVQY05WRPaqEQBCEPatH8BIeQRBU/AEVjVQQM8HUyMDczFw0EPVbHHYW9+c9dguanu6uKZpqhTuO45BPtm0T9b7vf8bJ+fRXmeeZcRxFsSwL0zTxLdZ1ffClqFJVFaqqYpomuq6jaRpnr+s6bNsmz3M8zyOOY4qiIIoiDMPA931c12UYBiF0bi0E+74nSRLCMCRNU4IgoCxL2rYVuWka0avrWohnWYbjOFiWJeZvG/IDrr5d8eShNPga/x3glSfFZL4BtWm8JW5HDEgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"hello\" title src=\"/static/6780fd91444e22499021dae0aff334ed/df24b/hello.png\" srcset=\"/static/6780fd91444e22499021dae0aff334ed/cf440/hello.png 148w,\n/static/6780fd91444e22499021dae0aff334ed/df24b/hello.png 269w\" sizes=\"(max-width: 269px) 100vw, 269px\">\n    </span>\n  </span>\n  \n  </a>\n    \n<p>Finally, we‚Äôll make some adjustments to our application to automatically run Snowpack when we include new dependencies. If we jump back to our <code class=\"language-text\">package.json</code> file, we‚Äôre going to add a <code class=\"language-text\">prepare</code> script in the <code class=\"language-text\">scripts</code> object:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"snowpack-demo\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token string\">\"scripts\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"prepare\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"npx snowpack\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>This <code class=\"language-text\">prepare</code> script will run in a couple specific instances, most notably for us, after we install a new dependency. Now if we include <a href=\"https://styled-components.com/\">styled-components</a>, we should see Snowpack running for us without any manual intervention.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn add styled-components\nyarn add v1.21.1\n[1/4] üîç  Resolving packages...\n[2/4] üöö  Fetching packages...\n...\nsuccess Saved 1 new dependency.\ninfo Direct dependencies\n‚îî‚îÄ styled-components@5.0.0\ninfo All dependencies\n‚îî‚îÄ styled-components@5.0.0\n$ npx snowpack\n‚úî snowpack installed: react, react-dom, styled-components. [0.75s]\n‚ú®  Done in 3.73s.</code></pre></div>\n<p>Notice that Snowpack command that occured after yarn finished including the dependency. We can continue to <a href=\"http://ryanlanciaux.com/blog/2020/01/09/an-introduction-to-styled-components/\">Use styled components like we would outside of an application configured with Snowpack</a></p>\n<p><a href=\"https://github.com/ryanlanciaux/snowpack-demo\">Check out the demo application from this article here</a>.</p>\n<p>I‚Äôm very excited about the developer experience, and performance benefits that Snowpack could unlock. I‚Äôd love to hear about any of the strategies you‚Äôre using to bundle your applications or of any thoughts you have on this article. Please <a href=\"https://twitter.com/ryanlanciaux\">find me on Twitter at @ryanlanciaux</a></p>","frontmatter":{"title":"Snowpack with React","date":"January 14, 2020","description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/2020/01/14/snowpack-with-react/","previous":{"fields":{"slug":"/about/"},"frontmatter":{"title":"About","page":true}},"next":{"fields":{"slug":"/blog/2020/01/31/optional-chaining-in-javascript/"},"frontmatter":{"title":"Optional Chaining in JavaScript","page":null}}}}