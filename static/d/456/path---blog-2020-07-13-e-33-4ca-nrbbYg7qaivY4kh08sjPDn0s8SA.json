{"data":{"site":{"siteMetadata":{"title":"Ryan Lanciaux","author":"Ryan Lanciaux"}},"markdownRemark":{"id":"cd8c0b43-f591-53e3-979b-f2fec7513c5e","excerpt":"GitHub profiles are a great addition to the platform. These profiles allow you to highlight your experience/interests and supply a little bit of personality to…","html":"<p>GitHub profiles are a great addition to the platform. These profiles allow you to highlight your experience/interests and supply a little bit of personality to what people see when they visit your profile. There are quite a few guides on creating a profile, but for those who may not have jumped into that just yet, you can add your profile by creating a new repository that matches your GitHub username. Any edits to the index.md file will show up when people vist github.com/{your<em>user</em>name}</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/11a9651cbdf9790c1b00219178e50e39/2a182/github_profile.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 29.545454545454547%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABHUlEQVQY043NbUuDUBTAcb//V+llBEEUBIs9aDbnHqDVoLbc9Oqdc+q8m/rvaiN6sRedw49zOHDOMdI0I89y/sY+TRGRRMYJ8S6hLCtOVd1qom6yvsyQUch8OkEIyWbtcywUn+sYZ/bBdL7CC/bEadUSW4VMFOerFxnpMSM8BEiVaDv2VUZQZPiaUBmyVERloWvRzsNjzgFFrh3Omj7TXV4XGF4ZceW84Kbv2NsJA+HyHI0ZBA5PK6vVWZqahS3H2OEQMxhihQ7d9ZC+72A2O3r3TS0xvkrB9atNL3C5Gd9zO3vkbt7hYdGlL0a/evqBqQ9a2iAc6eq2c1M/t+Mpk+OCReVh7OoUSYxfR3gnwUbXTfVD6Pn/bNu9sI75Bqagwnp4HfIhAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Create GitHub profile\"\n        title=\"\"\n        src=\"/static/11a9651cbdf9790c1b00219178e50e39/b9e4f/github_profile.png\"\n        srcset=\"/static/11a9651cbdf9790c1b00219178e50e39/cf440/github_profile.png 148w,\n/static/11a9651cbdf9790c1b00219178e50e39/d2d38/github_profile.png 295w,\n/static/11a9651cbdf9790c1b00219178e50e39/b9e4f/github_profile.png 590w,\n/static/11a9651cbdf9790c1b00219178e50e39/2a182/github_profile.png 660w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2>Website Counter</h2>\n<p>I wanted to see if I could make my profile look a little bit like a website from the 1990s. A big part of any 90s personal website is the visitor counter. We can create a fun (and not necessarily accurate) counter pretty quickly using node and express. I ended up using Glitch for mine, but this concept should work on any platform that supports node. </p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0d9392dd50c111c153c4b1486b5f8572/b395b/counter.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 368px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 27.717391304347828%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABKUlEQVQY05WRy0rDQBSG8yAKXhYKmraLggupddfiW7hSSkFootaKqNAH8NHUrU1rWmxq0qbNvWCSz0kQN9KFZ/j4Z/5zOMyZkRzXJVouCcOQpdAoinINhQZBIAhzLxB53w9+vIAkSf6QpinS88srmtZH6w/QhyOGgp44v/W03Bu864wNg4+xgT4a5WT+qpBWJVKxAjfAc3xc28V3fbyF96uLmYOzcHHmGWIvauIkRjIti0/TxDQtrOkUXR8ys234gvppDbkqs364RrlWZru6xX5lj1K9yObRBoWKTOFYZvdgh9JJEXfuIdn2HMOYYEwmZM2HYqSssbgg3acuym2L88sz2g/XNG+atDot1HuVRruB0lFQ7hQuri5QH1VC8d4rR47jmP9GIj7lG129ojGlR4YzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Counter example\"\n        title=\"\"\n        src=\"/static/0d9392dd50c111c153c4b1486b5f8572/b395b/counter.png\"\n        srcset=\"/static/0d9392dd50c111c153c4b1486b5f8572/cf440/counter.png 148w,\n/static/0d9392dd50c111c153c4b1486b5f8572/d2d38/counter.png 295w,\n/static/0d9392dd50c111c153c4b1486b5f8572/b395b/counter.png 368w\"\n        sizes=\"(max-width: 368px) 100vw, 368px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><a href=\"https://github.com/ryanlanciaux\">Take a look at my GitHub profile to see this in action</a>.</p>\n<h2>Node / Express project</h2>\n<p>The entire code for this project is posted below (or in this GitHub gist, or where it’s running <a href=\"https://glitch.com/edit/#!/ryan-lanciaux-counter?path=server.js%3A1%3A0\">on Glitch</a>). There are a lot of practices that we’d either want to avoid or clean up if it was for more of a production application. The key here is something that could be accomplished quickly for fun.</p>\n<h2>Tracking visits</h2>\n<p>From a high level, this application has a variable that records visit counts, an endpoint that responds to count.svg and updates the visit counts. Additionally, the count.svg endpoint should generate and respond with an image based on the count.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const express = require(&#39;express&#39;)\nconst app = express()\n\nconst PLACES = 7;\n\n// no db - so global var to keep track of count\nlet counter = 0\n\nfunction getCountImage(count) {\n   ...\n}\n\n// get the image\napp.get(&#39;/count.svg&#39;, (req, res) =&gt; {\n  counter++;\n  \n  // This helps with GitHub&#39;s image cache \n  //   see more: https://rushter.com/counter.svg\n  res.set({\n  &#39;content-type&#39;: &#39;image/svg+xml&#39;,\n  &#39;cache-control&#39;: &#39;max-age=0, no-cache, no-store, must-revalidate&#39;\n  })\n  \n  // Send the generated SVG as the result\n  res.send(getCountImage(counter));\n})\n\nconst listener = app.listen(process.env.PORT, () =&gt; {\n  console.log(&#39;Your app is listening on port &#39; + listener.address().port)\n})</code></pre></div>\n<h2>Tracking visit count</h2>\n<p>We’re using the global counter variable to keep track of visits. When a request comes in to count.svg, we update the global counter variable and generate an image. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// set up the counter variable\nlet counter = 0;\n\n...\napp.get(&#39;/count.svg&#39;, (req, res) =&gt; {\n  // update the counter on any image request\n  counter++;\n  ...\n}</code></pre></div>\n<h2>Generating an image</h2>\n<p>I created an image in Sketch and copied the results as SVG and pasted it into the <code class=\"language-text\">getCountImage</code> method. The image was dissected a bit and rebuilt using our count value.</p>\n<p>You’ll notice in this function, we’re switching the count to a padded string, and then into an array. This allows us to show the zeros before the count with the specified number of PLACES. <code class=\"language-text\">const countArray = count.toString().padStart(PLACES, &#39;0&#39;).split(&#39;&#39;);</code> From there, we build the count squares part of the image by reducing the array into a single string, and then referencing that in the svg. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function getCountImage(count) {\n  // This is not the greatest way for generating an SVG but it&#39;ll do for now\n  const countArray = count.toString().padStart(PLACES, &#39;0&#39;).split(&#39;&#39;);\n\n  const parts = countArray.reduce((acc, next, index) =&gt; `\n        ${acc}\n        &lt;rect id=&quot;Rectangle&quot; fill=&quot;#000000&quot; x=&quot;${index * 32}&quot; y=&quot;0.5&quot; width=&quot;29&quot; height=&quot;29&quot;&gt;&lt;/rect&gt;\n        &lt;text id=&quot;0&quot; font-family=&quot;Courier&quot; font-size=&quot;24&quot; font-weight=&quot;normal&quot; fill=&quot;#00FF13&quot;&gt;\n            &lt;tspan x=&quot;${index * 32 + 7}&quot; y=&quot;22&quot;&gt;${next}&lt;/tspan&gt;\n        &lt;/text&gt;\n`, &#39;&#39;);\n  \n  return `&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;svg width=&quot;${PLACES * 32}px&quot; height=&quot;30px&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot;&gt;\n    &lt;title&gt;Count&lt;/title&gt;\n    &lt;g id=&quot;Page-1&quot; stroke=&quot;none&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot; fill-rule=&quot;evenodd&quot;&gt;\n      ${parts}\n    &lt;/g&gt;\n&lt;/svg&gt;\n}</code></pre></div>\n<h2>Wrapping up</h2>\n<p>Ideally, we would want to persist our count to ensure that if the server restarts, the count values picks back up where we left off.\nThis could be something like a database record, or simply writing to a file. For this example, I don’t care too much if I lose the count as it’s mostly to achieve the 90s design aesthetics :D </p>\n<p>The full code is available in <a href=\"https://gist.github.com/ryanlanciaux/3e29e75bd32efee9681c2ab85b99cc6f\">this GitHub gist</a>, or where it’s running <a href=\"https://glitch.com/edit/#!/ryan-lanciaux-counter?path=server.js%3A1%3A0\">on Glitch</a>. </p>\n<h2>Additional references:</h2>\n<p>I started off referencing <a href=\"https://flaviocopes.com/count-visits-static-site/\">an analytics example by Flavio Copes</a> available here. In this example, Flavio created an svg that would collect website visit counts as a simple alternative to Google Analytics.  </p>\n<p>This <a href=\"https://rushter.com/blog/github-profile-markdown/\">article on the same topic by Artem Golubin</a> was really helpful in determining how to adjust the HTTP headers to work with GitHub’s image caching. <a href=\"https://docs.github.com/en/github/authenticating-to-github/about-anonymized-image-urls\">GitHub has an excellent feature that anonymizes browser details from images to help prevent tracking called Camo</a>. Without adjusting the HTTP headers, the image would not update upon new visits.</p>","frontmatter":{"title":"Quick GitHub profile visit counter","date":"July 13, 2020","description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/2020/07/13//","previous":{"fields":{"slug":"/blog/2020/02/14/better-testing-with-storybook/"},"frontmatter":{"title":"Better testing with Storybook","page":null}},"next":null}}