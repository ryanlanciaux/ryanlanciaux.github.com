
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Ryan Lanciaux</title>
  <meta name="author" content="Ryan Lanciaux">

  
  <meta name="description" content="Finally we&#39;re to the point where we can see all our hard work come together. We have most of the hard work done but we still have a lot of &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ryanlanciaux.github.com/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Ryan Lanciaux" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Ryan Lanciaux</a></h1>
  
    <h2>Random programming blog.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ryanlanciaux.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/05/26/rhinocommons-nhibernate-and-asp-net-mvc-part-4-the-mvc-application/">RhinoCommons, NHibernate and ASP.NET MVC Part 4 - the MVC Application</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-05-26T20:26:00-04:00" pubdate data-updated="true">May 26<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
Finally we&#39;re to the point where we can see all our hard work come together. We have most of the hard work done but we still have a lot of ground to cover. If you haven&#39;t been following along, please check out <a href="/ryanlanciaux.com/post/RhinoCommons2c-NHibernate-and-ASPNET-MVC.aspx" target="_blank">Setting Up The Assemblies</a>, <a href="/ryanlanciaux.com/post/RhinoCommons2c-NHibernate-and-ASPNET-MVC-Part-2--.aspx" target="_blank">Configuring the Application</a> and <a href="/ryanlanciaux.com/post/RhinoCommons2c-NHibernate-and-ASPNET-MVC-Part-2--.aspx" target="_blank">Developing the Model</a>.
</p>


<p>
<strong>Unit of Work</strong>
</p>


<p>
In some of my initial tests with NHibernate and ASP.NET MVC Pattern I kept seeing the benefits of having a Unit of Work or Session Per Request (that is opening and closing the NHibernate session at the begining and end of the http request respectively). To Recap a little, I started to write my own Session Per Request, however, <a href="http://www.lostechies.com/blogs/chad_myers/" target="_blank">Chad Myers</a> pointed me to the Rhino Commons project which already implemented this. I think it&#39;s worthwhile becuase I don&#39;t really like putting NHibernate session code in my controller plus as <a href="http://martinfowler.com/eaaCatalog/unitOfWork.html" target="_blank">Martin Fowler writes</a>
<br />
</p>


<blockquote>
    A Unit of Work keeps track of everything you do during a business transaction that can affect the database. When you&#39;re done, it figures out everything that needs to be done to alter the database as a result of your work.
</blockquote>


<p>
Luckily, with RhinoCommons, it&#39;s pretty easy to implement this pattern (<a href="http://www.ayende.com/Blog/archive/2007/06/08/Rhino-Commons-RepositoryltTgt-and-Unit-Of-Work.aspx" target="_blank">check out Ayende&#39;s post on this</a>). In a standard web forms application, we would normally create a Global.aspx that inherits UnitOfWorkApplication. Since we&#39;re using ASP.NET MVC, however, we don&#39;t necessarily want to go that route. As <a href="http://michaelhanney.com/blog/" target="_blank">Michael Hanney</a> notes on <a href="http://michaelhanney.com/blog/2008/04/27/beginning-systemwebmvc-with-rhino-tools-caslte-active-record-and-nhibernate/" target="_blank">his post on MVC and Castle</a> we can have our Global.asax inherit from UnitOfWorkApplication. 
</p>


<p>
&nbsp;
</p>


<!--code-->


<div class="code">
<div style="background: #1b1b1b none repeat scroll 0% 0%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">GlobalApplication</span> : <span style="color: #47b3d1">UnitOfWorkApplication</span>
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">override</span> <span style="color: #23b4eb">void</span> <span style="color: #a5a3a3">Application_Start</span>(<span style="color: #23b4eb">object</span> <span style="color: #a5a3a3">sender</span>, <span style="color: #47b3d1">EventArgs</span> <span style="color: #a5a3a3">e</span>)&nbsp; 
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {&nbsp; 
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">base</span>.<span style="color: #a5a3a3">Application_Start</span>(<span style="color: #a5a3a3">sender</span>, <span style="color: #a5a3a3">e</span>);&nbsp; 
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">RegisterRoutes</span>(<span style="color: #47b3d1">RouteTable</span>.<span style="color: #a5a3a3">Routes</span>);&nbsp; 
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; } 
</p>
<p style="margin: 0px">
&#8230; 
</p>
<p style="margin: 0px">
&nbsp; &nbsp;&nbsp; } 
</p>
</div>
</div>


<p>
<!--endCode-->If you know of another way to do this, please be sure to let me know. Also, the routing still works as it normally would &#8211; we&#39;re just running this code first to instantiate the UnitOfWork. 
</p>


<p>
In our controllers we can call our reference our Hibernate repositories and classes without specifying an ISession.
<br />
<!--code-->
</p>


<div class="code">
<div style="background: #1b1b1b none repeat scroll 0% 0%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #47b3d1">ActionResult</span> <span style="color: #a5a3a3">InsertProductGroup</span>(<span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">Title</span>)
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #47b3d1">ProductGroup</span> <span style="color: #a5a3a3">pg</span> = <span style="color: #23b4eb">new</span> <span style="color: #47b3d1">ProductGroup</span>();
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">pg</span>.<span style="color: #a5a3a3">Title</span> = <span style="color: #a5a3a3">Title</span>;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #47b3d1">Repository</span>&lt;<span style="color: #47b3d1">ProductGroup</span>&gt;.<span style="color: #a5a3a3">Save</span>(<span style="color: #a5a3a3">pg</span>);
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #47b3d1">UnitOfWork</span>.<span style="color: #a5a3a3">Current</span>.<span style="color: #a5a3a3">Flush</span>();
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">return</span> <span style="color: #a5a3a3">RenderView</span>(<span style="color: #80ff00">&quot;AddProductGroup&quot;</span>);
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; } 
</p>
</div>
</div>


<p>
<!--endCode--> Notice we&#39;re still flushing our data &#8211; but it makes the controllers a LOT cleaner. Imagine if we had to instantiate and clean up our session in each controller. 
</p>


<p>
One further thing, the UnitOfWorkApplication supports both short and long conversations. I&#39;m not going to go too much into that but if your application requires keeping objects around for a couple HTTP Requests before saving to the database Long Conversation may be the way to go. <a href="http://www.ayende.com/Wiki/HttpModules.ashx" target="_blank">See Ayende&#39;s Wiki for more on this</a> 
</p>


<p>
<strong>NHibernate Query Generator</strong><br />
In the <a href="/ryanlanciaux.com/post/RhinoCommons2c-NHibernate-and-ASPNET-MVC.aspx" target="_blank">first post of this series</a> we looked at what it takes to setup NHibernate Query Generator (NHQG from here out). Now we get to use it to make some really nice looking code (in a later post, however, we&#39;ll be using LINQ to NHibernate). If we&#39;ve set up the tool as mentioned in the first post (listed earlier), all we have to do is run the tool and make sure the generated code is added to the project. 
</p>


<p>
NHQG lets us use a fluent interface to set filters on our Hibernate queries; this results in code that, in my opinion, is very easy to write and understand later on. If we wanted to Find one Product with a specific title, our code would look something like this: 
</p>


<!--code-->


<div class="code">
<div style="background: #1b1b1b none repeat scroll 0% 0%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #47b3d1">ActionResult</span> <span style="color: #a5a3a3">ViewProduct</span>(<span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">ID</span>)
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">var</span> <span style="color: #a5a3a3">p</span> = <span style="color: #47b3d1">Repository</span>&lt;<span style="color: #47b3d1">Product</span>&gt;.<span style="color: #a5a3a3">FindOne</span>(<span style="color: #47b3d1">Where</span>.<span style="color: #a5a3a3">Product</span>.<span style="color: #a5a3a3">Title</span> == <span style="color: #a5a3a3">ID</span>);
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">if</span> (<span style="color: #a5a3a3">p</span> != <span style="color: #23b4eb">null</span>)
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">return</span> <span style="color: #a5a3a3">RenderView</span>(<span style="color: #80ff00">&quot;DisplayProduct&quot;</span>,
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; <span style="color: #a5a3a3">p</span>);&nbsp; 
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">return</span> <span style="color: #a5a3a3">RenderView</span>(<span style="color: #80ff00">&quot;DisplayProduct&quot;</span>);
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
</div>
</div>


<p>
<!--endCode-->
The <em>Where.Product.Title == ID</em> is all from the NHQG autogenerated code. Now we actually have something to show for all our configuration and setup work. Soon, we&#39;re going to take a look at using LINQ to NHibernate instead of NHQG.</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/05/22/rhinocommons-nhibernate-and-asp-net-mvc-part-3-the-model/">RhinoCommons, NHibernate and ASP.NET MVC Part 3 - the Model</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-05-22T10:00:00-04:00" pubdate data-updated="true">May 22<span>nd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
We&#39;re going to keep moving now that everything is setup (<a href="/ryanlanciaux.com/post/RhinoCommons2c-NHibernate-and-ASPNET-MVC.aspx" target="_blank">see part one for setup</a>) and configured (<a href="/ryanlanciaux.com/post/RhinoCommons2c-NHibernate-and-ASPNET-MVC-Part-2--.aspx" target="_blank">see part two for configuration</a>). 
</p>


<p>
First off we are going to create our classes. The original classes and SQL tables are posted below (these may look familiar &#8211; they are from <a href="/ryanlanciaux.com/post/Using-NHibernate.aspx" target="_blank">my initial NHibernate post</a>)
</p>


<br />


<p>Initial Product<!--code --></p>

<div class="code" style="width: 100%">
<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">Product</span>
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">private</span> <span style="color: #a5a3a3">IList</span>&lt;<span style="color: #a5a3a3">Product</span>&gt; <span style="color: #a5a3a3">_RelatedProducts</span>;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">private</span> <span style="color: #a5a3a3">IList</span>&lt;<span style="color: #a5a3a3">ProductGroup</span>&gt; <span style="color: #a5a3a3">_ProductGroups</span>;
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #a5a3a3">Product</span>()
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_RelatedProducts</span> = <span style="color: #23b4eb">new</span> <span style="color: #a5a3a3">List</span>&lt;<span style="color: #a5a3a3">Product</span>&gt;();
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_ProductGroups</span> = <span style="color: #23b4eb">new</span> <span style="color: #a5a3a3">List</span>&lt;<span style="color: #a5a3a3">ProductGroup</span>&gt;();
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">ID</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">private</span> <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">Title</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">ImagePath</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">Description</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #a5a3a3">IList</span>&lt;<span style="color: #a5a3a3">Product</span>&gt; <span style="color: #a5a3a3">RelatedProducts</span>
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">get</span> { <span style="color: #23b4eb">return</span> <span style="color: #a5a3a3">_RelatedProducts</span>; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">set</span> { <span style="color: #a5a3a3">_RelatedProducts</span> = <span style="color: #23b4eb">value</span>; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #a5a3a3">IList</span>&lt;<span style="color: #a5a3a3">ProductGroup</span>&gt; <span style="color: #a5a3a3">ProductGroups</span>
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">get</span> { <span style="color: #23b4eb">return</span> <span style="color: #a5a3a3">_ProductGroups</span>; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">set</span> { <span style="color: #a5a3a3">_ProductGroups</span> = <span style="color: #23b4eb">value</span>; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
</div>
</div>


<br />


<!--end code-->


<p>Initial ProductGroup<br /></p>

<!--code-->


<div class="code" style="width: 100%">
<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">ProductGroup</span>
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">ProductGroupID</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">Title</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #2b91af">IList</span>&lt;<span style="color: #a5a3a3">Product</span>&gt; <span style="color: #a5a3a3">Products</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
</div>
</div>


<!--end code-->


<br />


<p>SQL Tables</p>

<!--code-->


<div class="code" style="width: 100%">
<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
<span style="color: #a5a3a3">CREATE</span> <span style="color: #a5a3a3">TABLE</span> [<span style="color: #a5a3a3">dbo</span>].[<span style="color: #a5a3a3">SimpleProducts</span>](
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; [<span style="color: #a5a3a3">ProductID</span>] [<span style="color: #23b4eb">char</span>](<span style="color: lime">32</span>) <span style="color: #a5a3a3">NOT</span> <span style="color: #a5a3a3">NULL</span>,
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; [<span style="color: #a5a3a3">Title</span>] [<span style="color: #a5a3a3">nvarchar</span>](<span style="color: lime">50</span>) <span style="color: #a5a3a3">NOT</span> <span style="color: #a5a3a3">NULL</span>,
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; [<span style="color: #a5a3a3">ImagePath</span>] [<span style="color: #a5a3a3">nvarchar</span>](<span style="color: lime">300</span>) <span style="color: #a5a3a3">NULL</span>,
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; [<span style="color: #a5a3a3">Description</span>] [<span style="color: #a5a3a3">nvarchar</span>](<span style="color: lime">500</span>) <span style="color: #a5a3a3">NULL</span>
</p>
<p style="margin: 0px">
)
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
<span style="color: #a5a3a3">CREATE</span> <span style="color: #a5a3a3">TABLE</span> [<span style="color: #a5a3a3">dbo</span>].[<span style="color: #a5a3a3">RelatedProductsLookup</span>](
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; [<span style="color: #a5a3a3">ProductID</span>] [<span style="color: #23b4eb">char</span>](<span style="color: lime">32</span>) <span style="color: #a5a3a3">NOT</span> <span style="color: #a5a3a3">NULL</span>,
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; [<span style="color: #a5a3a3">RelatedProductID</span>] [<span style="color: #23b4eb">char</span>](<span style="color: lime">32</span>) <span style="color: #a5a3a3">NOT</span> <span style="color: #a5a3a3">NULL</span>
</p>
<p style="margin: 0px">
)
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
<span style="color: #a5a3a3">CREATE</span> <span style="color: #a5a3a3">TABLE</span> [<span style="color: #a5a3a3">dbo</span>].[<span style="color: #a5a3a3">ProductsProductGroupsLookup</span>](
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; [<span style="color: #a5a3a3">ProductGroupID</span>] [<span style="color: #23b4eb">char</span>](<span style="color: lime">32</span>) <span style="color: #a5a3a3">NULL</span>,
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; [<span style="color: #a5a3a3">ProductID</span>] [<span style="color: #23b4eb">char</span>](<span style="color: lime">32</span>) <span style="color: #a5a3a3">NULL</span>
</p>
<p style="margin: 0px">
)
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
<span style="color: #a5a3a3">CREATE</span> <span style="color: #a5a3a3">TABLE</span> [<span style="color: #a5a3a3">dbo</span>].[<span style="color: #a5a3a3">ProductGroups</span>](
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; [<span style="color: #a5a3a3">ProductGroupID</span>] [<span style="color: #23b4eb">char</span>](<span style="color: lime">32</span>) <span style="color: #a5a3a3">NOT</span> <span style="color: #a5a3a3">NULL</span>,
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; [<span style="color: #a5a3a3">Title</span>] [<span style="color: #a5a3a3">nvarchar</span>](<span style="color: lime">50</span>) <span style="color: #a5a3a3">NULL</span>
</p>
</div>
</div>


<p>
<!--end code--><br />
<strong>ActiveRecord Classes</strong><br />
In a traditional NHibernate application, we would write usually our mapping files at this time<a href="/ryanlanciaux.com/post/Using-NHibernate.aspx" target="_blank">(see my other NHibernate post</a> for more on that). Since we&#39;re using the ActiveRecord pattern, however, we can specify all our mappings inline with the classes. It is important to note that this would not be a pure domain because we&#39;re placing our mappings inside the model. Warning if you&#39;re sensitive to using Attributes this may not be the code for you&#8230;
</p>


<p>
Our classes will now begin with an ActiveRecord attribute over the class; our properties will begin with Property/HasAndBelongsToMany/etc. Please note, for the sake of the example, I&#39;m being extremely verbose with my attributes. If your table/column names match the class/property names, some of the additional info in the attribute is not necessary.
<br />
<!--code-->
</p>


<div class="code" style="width: 100%">
<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; [<span style="color: #47b3d1">ActiveRecord</span>(<span style="color: #a5a3a3">Table</span>=<span style="color: #80ff00">&quot;SimpleProducts&quot;</span>)]
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">Product</span>
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">private</span> <span style="color: #2b91af">IList</span>&lt;<span style="color: #47b3d1">Product</span>&gt; <span style="color: #a5a3a3">_RelatedProducts</span>;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">private</span> <span style="color: #2b91af">IList</span>&lt;<span style="color: #47b3d1">ProductGroup</span>&gt; <span style="color: #a5a3a3">_ProductGroups</span>;
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #a5a3a3">Product</span>()
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_RelatedProducts</span> = <span style="color: #23b4eb">new</span> <span style="color: #47b3d1">List</span>&lt;<span style="color: #47b3d1">Product</span>&gt;();
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_ProductGroups</span> = <span style="color: #23b4eb">new</span> <span style="color: #47b3d1">List</span>&lt;<span style="color: #47b3d1">ProductGroup</span>&gt;();
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [<span style="color: #47b3d1">PrimaryKey</span>(<span style="color: #a5a3a3">Column</span>=<span style="color: #80ff00">&quot;ProductID&quot;</span>, <span style="color: #a5a3a3">Generator</span>=<span style="color: #a5a3a3">Castle</span>.<span style="color: #a5a3a3">ActiveRecord</span>.<span style="color: #2b91af">PrimaryKeyType</span>.<span style="color: #a5a3a3">UuidHex</span>)]
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">ID</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">private</span> <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [<span style="color: #47b3d1">Property</span>(<span style="color: #a5a3a3">NotNull</span>=<span style="color: #23b4eb">true</span>, <span style="color: #a5a3a3">Length</span>=<span style="color: lime">50</span>, <span style="color: #a5a3a3">Column</span>=<span style="color: #80ff00">&quot;Title&quot;</span>)]
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">Title</span> {<span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [<span style="color: #47b3d1">Property</span>(<span style="color: #a5a3a3">Length</span>=<span style="color: lime">300</span>, <span style="color: #a5a3a3">NotNull</span>=<span style="color: #23b4eb">false</span>, <span style="color: #a5a3a3">Column</span>=<span style="color: #80ff00">&quot;ImagePath&quot;</span>)]
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">ImagePath</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [<span style="color: #47b3d1">Property</span>(<span style="color: #a5a3a3">NotNull</span> = <span style="color: #23b4eb">false</span>, <span style="color: #a5a3a3">Length</span> = <span style="color: lime">500</span>, <span style="color: #a5a3a3">Column</span>=<span style="color: #80ff00">&quot;Description&quot;</span>)]
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">Description</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [<span style="color: #47b3d1">HasAndBelongsToMany</span>(<span style="color: #a5a3a3">Table</span>=<span style="color: #80ff00">&quot;RelatedProductsLookup&quot;</span>, <span style="color: #a5a3a3">ColumnKey</span>=<span style="color: #80ff00">&quot;ProductID&quot;</span>, <span style="color: #a5a3a3">ColumnRef</span>=<span style="color: #80ff00">&quot;RelatedProductID&quot;</span>)]
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #2b91af">IList</span>&lt;<span style="color: #47b3d1">Product</span>&gt; <span style="color: #a5a3a3">RelatedProducts</span>
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">get</span> { <span style="color: #23b4eb">return</span> <span style="color: #a5a3a3">_RelatedProducts</span>; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">set</span> { <span style="color: #a5a3a3">_RelatedProducts</span> = <span style="color: #23b4eb">value</span>; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [<span style="color: #47b3d1">HasAndBelongsToMany</span>(<span style="color: #a5a3a3">Table</span>=<span style="color: #80ff00">&quot;ProductsProductGroupsLookup&quot;</span>, <span style="color: #a5a3a3">ColumnKey</span>=<span style="color: #80ff00">&quot;ProductID&quot;</span>, <span style="color: #a5a3a3">ColumnRef</span>=<span style="color: #80ff00">&quot;ProductGroupID&quot;</span>)]
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #2b91af">IList</span>&lt;<span style="color: #47b3d1">ProductGroup</span>&gt; <span style="color: #a5a3a3">ProductGroups</span>
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">get</span> { <span style="color: #23b4eb">return</span> <span style="color: #a5a3a3">_ProductGroups</span>; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">set</span> { <span style="color: #a5a3a3">_ProductGroups</span> = <span style="color: #23b4eb">value</span>; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
</div>
</div>


<br />


<!--code-->


<div class="code" style="width: 100%">
<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; [<span style="color: #47b3d1">ActiveRecord</span>(<span style="color: #a5a3a3">Table</span>=<span style="color: #80ff00">&quot;ProductGroups&quot;</span>)]
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">ProductGroup</span>
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [<span style="color: #47b3d1">PrimaryKey</span>(<span style="color: #a5a3a3">Column</span>=<span style="color: #80ff00">&quot;ProductGroupID&quot;</span>, <span style="color: #a5a3a3">Generator</span>=<span style="color: #a5a3a3">Castle</span>.<span style="color: #a5a3a3">ActiveRecord</span>.<span style="color: #2b91af">PrimaryKeyType</span>.<span style="color: #a5a3a3">UuidHex</span>)]
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">ProductGroupID</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [<span style="color: #47b3d1">Property</span>(<span style="color: #a5a3a3">NotNull</span>=<span style="color: #23b4eb">true</span>, <span style="color: #a5a3a3">Length</span>=<span style="color: lime">50</span>, <span style="color: #a5a3a3">Column</span>=<span style="color: #80ff00">&quot;Title&quot;</span>)]
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">Title</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [<span style="color: #47b3d1">HasAndBelongsToMany</span>(<span style="color: #a5a3a3">Table</span>=<span style="color: #80ff00">&quot;ProductsProductGroupsLookup&quot;</span>, <span style="color: #a5a3a3">ColumnKey</span>=<span style="color: #80ff00">&quot;ProductGroupID&quot;</span>, <span style="color: #a5a3a3">ColumnRef</span>=<span style="color: #80ff00">&quot;ProductID&quot;</span>)]
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #2b91af">IList</span>&lt;<span style="color: #47b3d1">Product</span>&gt; <span style="color: #a5a3a3">Products</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
</div>
</div>


<p>
<br />
<strong>Repository Object</strong><br />
Another added benefit of using the Castle Active Record library is that we can use the Repository&lt;T&gt; for all of our object persistence. Instead of creating our own implementation of IRepository, we can write code like this to save / retrieve / update objects.
</p>


<div class="code">
Selecting an object (our product IDs are HEX UUID&#39;s so this is not exactly accurate)
<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
<span style="color: #23b4eb">var</span> <span style="color: #a5a3a3">p</span> = <span style="color: #47b3d1">Repository</span>&lt;<span style="color: #47b3d1">Product</span>&gt;.<span style="color: #a5a3a3">Get</span>(<span style="color: lime">23</span>);&nbsp;
</p>
</div>
</div>


<br />


<div class="code">
Saving / Updating <br />
<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
<span style="color: #47b3d1">Repository</span>&lt;<span style="color: #47b3d1">Product</span>&gt;.<span style="color: #a5a3a3">Save</span>(<span style="color: #a5a3a3">p</span>);
</p>
</div>
</div>


<p>
<br />
The repository is pretty nice &#8211; we can save all of our objects outside of the domain, which makes for a much cleaner design. Next time, we&#39;ll be looking at the extremely simple MVC application powered by this model and NHibernate Query Generator. <a href="/ryanlanciaux.com/post/RhinoCommons2c-NHibernate-and-ASPNET-MVC-Part-4---The-MVC-Application.aspx" target="_blank">Continue to Part 4</a>
</p>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/05/20/rhinocommons-nhibernate-and-asp-net-mvc-part-2-configuration/">RhinoCommons, NHibernate and ASP.NET MVC Part 2 - Configuration</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-05-20T22:23:00-04:00" pubdate data-updated="true">May 20<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
Following up on <a href="/ryanlanciaux.com/post/RhinoCommons2c-NHibernate-and-ASPNET-MVC.aspx" target="_blank">my last post</a>, we&#39;re going to setup a project and get everything ready for the code (we&#39;ll be doing the coding very soon &#8211; I promise).&nbsp; First off, create a new MVC application (make sure you&#39;re using the latest preview from codeplex) and a new Class library. From here, you&#39;d normally want to want to do some TDD to create your model but that&#39;s a little outside the scope of this example.
</p>


<p>
Add the references to Boo, Castle, NHibernate, RhinoCommons and Log4Net to the MVC application. In the class library, add Castle.ActiveRecord, Iesi.Collections, NHibernate, Rhino.Commons and Rhino.Commons.NHibernate. Switch over to your web.config file and Underneath the ConfigSections node add the following custom tags:
</p>


<!--code-->


<div class="code" style="width: 100%">
<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;</span><span style="color: lime">section</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">activerecord</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">type</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">Castle.ActiveRecord.Framework.Config.ActiveRecordSectionHandler, Castle.ActiveRecord</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;</span><span style="color: lime">sectionGroup</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">applicationSettings</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">type</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> &gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;</span><span style="color: lime">section</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">Rhino.Commons.Properties.Settings</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">type</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">/&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/</span><span style="color: lime">sectionGroup</span><span style="color: #88d0e8">&gt;&nbsp;&nbsp;&nbsp;  </span>
</p>
</div>
</div>


<p>
Next add the specific custom tag properties somewhere after the &lt;/ConfigSections&gt; :&nbsp;
</p>


<!--code-->


<div class="code" style="width: 100%">
<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &lt;</span><span style="color: lime">activerecord</span><span style="color: #88d0e8"> </span><span style="color: #cecece">isWeb</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">true</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;</span><span style="color: lime">config</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;</span><span style="color: lime">add</span><span style="color: #88d0e8"> </span><span style="color: #cecece">key</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">hibernate.connection.driver_class</span><span style="color: fuchsia">&quot;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;  </span><span style="color: #cecece">value</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">NHibernate.Driver.SqlClientDriver</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;</span><span style="color: lime">add</span><span style="color: #88d0e8"> </span><span style="color: #cecece">key</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">dialect</span><span style="color: fuchsia">&quot;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;  </span><span style="color: #cecece">value</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">NHibernate.Dialect.MsSql2005Dialect</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;</span><span style="color: lime">add</span><span style="color: #88d0e8"> </span><span style="color: #cecece">key</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">hibernate.connection.provider</span><span style="color: fuchsia">&quot;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;  </span><span style="color: #cecece">value</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">NHibernate.Connection.DriverConnectionProvider</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;</span><span style="color: lime">add</span><span style="color: #88d0e8"> </span><span style="color: #cecece">key</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">hibernate.show_sql</span><span style="color: fuchsia">&quot;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;  </span><span style="color: #cecece">value</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">false</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;</span><span style="color: lime">add</span><span style="color: #88d0e8"> </span><span style="color: #cecece">key</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">connection.connection_string</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">value</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">Data Source=___________;Initial Catalog=NHibernateTest;Integrated Security=True</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/</span><span style="color: lime">config</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &lt;/</span><span style="color: lime">activerecord</span><span style="color: #88d0e8">&gt;</span>
</p>
</div>
</div>


<!--end code-->


<p>These active record settings should be pretty straight-forward but for more information on specific dialects or other properties check out the <a href="http://using.castleproject.org/display/AR/Configuration+Reference" target="_blank">Castle&#39;s Configuration Reference</a>. Be sure to swap out my Data Source and Initial Catalog settings with yours.<br /></p>

<br />


<!--code-->


<div class="code" style="width: 100%">
<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &lt;</span><span style="color: lime">applicationSettings</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;</span><span style="color: lime">Rhino.Commons.Properties.Settings</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;</span><span style="color: lime">setting</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">WindsorConfig</span><span style="color: fuchsia">&quot;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;  </span><span style="color: #cecece">serializeAs</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">String</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;</span><span style="color: lime">value</span><span style="color: #88d0e8">&gt;</span><span style="color: #47b3d1">windsor.boo</span><span style="color: #88d0e8">&lt;/</span><span style="color: lime">value</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/</span><span style="color: lime">setting</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/</span><span style="color: lime">Rhino.Commons.Properties.Settings</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px">
<span style="color: #88d0e8">&nbsp;&nbsp;&nbsp; &lt;/</span><span style="color: lime">applicationSettings</span><span style="color: #88d0e8">&gt;</span>
</p>
</div>
</div>


<!--end code-->


<p>With this tag, we&#39;re telling Castle that we&#39;re going to configure Windsor with a boo file instead of an xml document. <a href="http://ayende.com/blog/" target="_blank">Ayende Rahien</a> pointed out in the comments that this tag is no longer necessary as long as the file is named windsor.boo</p>

<p>
<strong>Windsor Configuration With Boo</strong>&nbsp;
</p>


<p>
Up until this point, we&#39;ve been dealing with the web.config to configure our application &#8211; now we want to configure Windsor but instead of using another xml file, we&#39;re going to use a boo file. What is Boo you might ask? According to <a href="http://en.wikipedia.org/wiki/Boo_(programming_language)" target="_blank">wiki</a>&#8230;
</p>


<blockquote>
    Boo is an object oriented, statically typed programming language developed starting in 2003, which seeks to make use of the Common Language Infrastructure support for Unicode, internationalization and web style applications, while using a Python-inspired syntax and a special focus on language and compiler extensibility.&nbsp;
</blockquote>


<p>
The mere fact that you can use a programming language instead of an XML file to configure Windsor is pretty sweet. I would be lying if I claimed to know boo very well, however, the Exesto and Hibernating-Forums samples (from the Rhino-Tools project) have enough information to get you up and running. I plan on learning boo well enought to create my own config files from scratch but in the mean time, here&#39;s what my boo file looks like (heavily influenced by the sample applications mentioned above)&#8230; 
</p>


<!--begin code-->


<div class="code" style="width: 100%">
<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
import Rhino.Commons
</p>
<p style="margin: 0px">
import System.Reflection
</p>
<p style="margin: 0px">
import Castle.Core
</p>
<p style="margin: 0px">
import Castle.Services.Transaction
</p>
<p style="margin: 0px">
import Castle.Facilities.AutomaticTransactionManagement
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
activeRecordAssemblies = ( Assembly.Load(&quot;ProductModelActiveRecord&quot;), )
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
Component(&quot;active_record_repository&quot;, IRepository, ARRepository)
</p>
<p style="margin: 0px">
Component(&quot;active_record_unit_of_work&quot;, 
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; IUnitOfWorkFactory, 
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; ActiveRecordUnitOfWorkFactory,
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; assemblies: activeRecordAssemblies )
</p>
</div>
</div>


<p>
<!--end code-->Check out <a href="http://ayende.com/blog/" target="_blank">Ayende&#39;s</a> <a href="/ryanlanciaux.com/post/RhinoCommons2c-NHibernate-and-ASPNET-MVC-Part-2--.aspx#comment">comment </a>for a more succinct way to register these components.
As you might have noticed, I still have to set up the colors for boo files in Visual Studio :) What this file is doing is loading the assemblies and setting up the repository / unit of work (we&#39;ll see those in action in the next parts of this series). Your project configuration should be all set. Next time we will actually be writing some code so stick around for that. <a href="/ryanlanciaux.com/post/RhinoCommons2c-NHibernate-and-ASPNET-MVC-Part-3-the-model.aspx">View Part Three - The Model</a> 
</p>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/05/19/rhinocommons-nhibernate-and-asp-net-mvc-part-1-setup/">RhinoCommons, NHibernate and ASP.NET MVC Part 1 - Setup</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-05-19T17:29:00-04:00" pubdate data-updated="true">May 19<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
After my last post about the unit of work with NHibernate, <a href="http://www.lostechies.com/blogs/chad%5Fmyers/" target="_blank">Chad Myers</a> mentioned that I should take a look at Ayende&#39;s Rhino Commons (because the Unit of Work stuff is already being handled). Since I am not a big fan of reinventing the wheel I decided I would give it a shot. There&#39;s going to be another post in the near future about how to get Rhino Commons, Castle ActiveRecord and ASP.NET MVC working together but for now, it would be good to make sure all the necessary components are installed on your machine.
</p>


<ol>
    <li>Make sure you have a subversion client &#8211; <a href="http://tortoisesvn.tigris.org/" target="_blank">Tortoise SVN</a> or the command prompt is what I use but any subversion client should be fine. </li>
    <li>If you don&#39;t already have <a href="http://nant.sourceforge.net/" target="_blank">Nant</a> installed on your machine download and install that</li>
    <li>Download and build the following (<a href="http://www.ayende.com/blog" target="_blank">Ayende </a>mentions, the <a href="http://www.ayende.com/Blog/archive/2007/08/06/Running-on-the-trunk-Building-Rhino-Commons.aspx" target="_blank">trick is not opening in Visual Studio</a>):
    <ul>
        <li>Castle Project &#8211; (<a href="http://svn.castleproject.org:8080/svn/castle/trunk" target="_blank">http://svn.castleproject.org:8080/svn/castle/trunk</a>)</li>
        <li> NHibernate &#8211; (<a href="https://nhibernate.svn.sourceforge.net/svnroot/nhibernate/trunk" target="_blank">https://nhibernate.svn.sourceforge.net/svnroot/nhibernate/trunk</a>)</li>
        <li> Rhino-Tools (<a href="https://rhino-tools.svn.sourceforge.net/svnroot/rhino-tools/trunk" target="_blank">https://rhino-tools.svn.sourceforge.net/svnroot/rhino-tools/trunk</a>) </li>
    </ul>
    </li>
    <li>Next you&#39;re going to want to setup the NHibernate Query Generator (we&#39;re going to use Linq to NHibernate in a later example but for now get this installed). This should be a part of the Rhino-tools package but if you want you can <a href="http://www.ayende.com/projects/nhibernate-query-analyzer/downloads.aspx" target="_blank">download the binaries</a>. Then setup the application as an external tool in Visual Studio (my settings are posted below). <a href="http://jhollingworth.wordpress.com/2008/03/28/subsonic-like-nhibernate-query-generator-button-in-visual-studio/%20target=">see James Hollingworth&#39;s post for more info</a>
    <br />
    <img src="/ryanlanciaux.com/image.axd?picture=nhibernateqg.gif" alt="" />
    <ul>
        <li>Command: C:\program files\nhqg\NHQG.exe</li>
        <li>Arguments: /Lang:cs /InputFilePattern:$(BinDir)/ProductModelActiveRecord.dll /OutputDirectory:$(ProjectDir)/Queries /BaseNamespace:Queries</li>
        <li>Initial Directory: $(TargetDir)</li>
    </ul>
    </li>
    <li>Finally make sure you&#39;re running the preview 3 drop of the ASP.NET MVC Framework &#8211; you can <a href="http://www.codeplex.com/aspnet/Release/ProjectReleases.aspx?ReleaseId=12640" target="_blank">get that here from CodePlex</a> </li>
</ol>


<p>You should now have everything setup. It may be good to take a look at the Exesto application in the rhino-tools\SampleApplications directory to get an introduction to the Rhino-tools / binsor / castle settings that we&#39;ll be looking at later on. Finally, if you are not familiar with the ASP.NET MVC Framework take a look <a href="http://weblogs.asp.net/fredriknormen/archive/2008/04/17/asp-net-mvc-framework-pre-preview-3-a-step-by-step-guide-to-create-a-simple-web-app.aspx" target="_blank">Fredrik Normen&#39;s step by step guide</a>. In the next couple of days, I will be posting how to wire these tools together for quick web application development. Stay Tuned.<br /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/05/11/nhibernate-session-per-request/">NHibernate Session Per Request</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-05-11T23:47:00-04:00" pubdate data-updated="true">May 11<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
A little earlier on, I had posted a simple example of <a href="http://svn2.assembla.com/svn/NHibernateTest/" target="_blank">NHibernate in an MVC application</a> as well as some <a href="/ryanlanciaux.com/post/NHibernate-in-an-ASPNET-MVC-application.aspx" target="_blank">initial questions</a> I had about NHibernate Session management. In response to my question, <a href="http://mhinze.com/" target="_blank">Matt Hinze</a> mentioned that the session should be transparent to the controller and posted some links to various articles explaining how to achieve this. I finally had a chance to play around with this type of session management and spent most of my time looking through <a href="http://devlicio.us/blogs/billy_mccafferty/" target="_blank">Billy McCafferty</a>&#39;s <a href="http://www.codeproject.com/KB/architecture/NHibernateBestPractices.aspx" target="_blank">NHibernate Best practices</a> on CodeProject. As I&#39;ve mentioned before, I&#39;m very new to NHibernate so some of the things I&#39;m doing may not be ideal. 
</p>


<p>
<strong>HTTP Module</strong>
</p>


<p>
First off, I created an HTTP module; this is where the session will be opened and closed (by accessing the session manager class). You&#39;ll notice on the Init that event handlers have been added. I&#39;m using the same session manager class that I was using in my last example, however, now it&#39;s being initialized / closed here (rather than in each controller action). 
</p>


<div class="code">
<!--
{\rtf1\ansi\ansicpg\lang1024\noproof65001\uc1 \deff0{\fonttbl{\f0\fnil\fcharset0\fprq1 Monaco;}}{\colortbl;??\red255\green255\blue255;\red27\green27\blue27;\red35\green180\blue235;\red71\green179\blue209;\red43\green145\blue175;\red165\green163\blue163;}??\fs18 \cf1\cb2\highlight2     \cf3 public\cf1  \cf3 class\cf1  \cf4 SessionModule\cf1  : \cf5 IHttpModule\par ??\cf1     \{\par ??        \cf3 private\cf1  \cf5 ISession\cf1  \cf6 _session\cf1 ;\par ??\par ??        \cf3 public\cf1  \cf3 void\cf1  \cf6 Init\cf1 (\cf4 HttpApplication\cf1  \cf6 context\cf1 )\par ??        \{\par ??            \cf6 context\cf1 .\cf6 BeginRequest\cf1  += \cf3 new\cf1  \cf5 EventHandler\cf1 (\cf6 BeginTransaction\cf1 );\par ??            \cf6 context\cf1 .\cf6 EndRequest\cf1  += \cf3 new\cf1  \cf5 EventHandler\cf1 (\cf6 CloseSession\cf1 );\par ??        \}\par ??\par ??        \cf3 private\cf1  \cf3 void\cf1  \cf6 BeginTransaction\cf1 (\cf3 object\cf1  \cf6 sender\cf1 , \cf4 EventArgs\cf1  \cf6 e\cf1 )\par ??        \{\par ??            \cf6 _session\cf1  = \cf4 SessionManager\cf1 .\cf6 GetCurrentSession\cf1 ();\par ??        \}\par ??\par ??        \cf3 private\cf1  \cf3 void\cf1  \cf6 CloseSession\cf1 (\cf3 object\cf1  \cf6 sender\cf1 , \cf4 EventArgs\cf1  \cf6 e\cf1 )\par ??        \{\par ??            \cf6 _session\cf1 .\cf6 Flush\cf1 ();\par ??            \cf6 _session\cf1 .\cf6 Close\cf1 ();\par ??        \}\par ??\par ??        \cf3 public\cf1  \cf3 void\cf1  \cf6 Dispose\cf1 ()\par ??        \{\par ??            \cf6 _session\cf1  = \cf3 null\cf1 ;\par ??        \}\par ??    \}}
-->
<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">SessionModule</span> : <span style="color: #2b91af">IHttpModule</span>
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">private</span> <span style="color: #2b91af">ISession</span> <span style="color: #a5a3a3">_session</span>;
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">void</span> <span style="color: #a5a3a3">Init</span>(<span style="color: #47b3d1">HttpApplication</span> <span style="color: #a5a3a3">context</span>)
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">context</span>.<span style="color: #a5a3a3">BeginRequest</span> += <span style="color: #23b4eb">new</span> <span style="color: #2b91af">EventHandler</span>(<span style="color: #a5a3a3">OpenSession</span>);
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">context</span>.<span style="color: #a5a3a3">EndRequest</span> += <span style="color: #23b4eb">new</span> <span style="color: #2b91af">EventHandler</span>(<span style="color: #a5a3a3">CloseSession</span>);
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">private</span> <span style="color: #23b4eb">void</span> <span style="color: #a5a3a3">OpenSession</span>(<span style="color: #23b4eb">object</span> <span style="color: #a5a3a3">sender</span>, <span style="color: #47b3d1">EventArgs</span> <span style="color: #a5a3a3">e</span>)
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_session</span> = <span style="color: #47b3d1">SessionManager</span>.<span style="color: #a5a3a3">GetCurrentSession</span>();
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">private</span> <span style="color: #23b4eb">void</span> <span style="color: #a5a3a3">CloseSession</span>(<span style="color: #23b4eb">object</span> <span style="color: #a5a3a3">sender</span>, <span style="color: #47b3d1">EventArgs</span> <span style="color: #a5a3a3">e</span>)
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_session</span>.<span style="color: #a5a3a3">Flush</span>();
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_session</span>.<span style="color: #a5a3a3">Close</span>();
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">void</span> <span style="color: #a5a3a3">Dispose</span>()
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_session</span> = <span style="color: #23b4eb">null</span>;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
</div>
</div>


<p>
<br />
Next, I added this class to the HttpModules section of the web.config
</p>


<div class="code">
<!--
{\rtf1\ansi\ansicpg\lang1024\noproof65001\uc1 \deff0{\fonttbl{\f0\fnil\fcharset0\fprq1 Monaco;}}{\colortbl;??\red136\green208\blue232;\red27\green27\blue27;\red0\green255\blue0;\red206\green206\blue206;\red255\green0\blue255;}??\fs18 \cf1\cb2\highlight2 &lt;\cf3 add\cf1  \cf4 name\cf1 =\cf5 "\cf4 SessionModule\cf5 "\cf1  \cf4 type\cf1 =\cf5 "\cf4 ProductModel.Session.SessionModule\cf5 "\cf1 /&gt;}
-->
<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
<span style="color: #88d0e8">&lt;</span><span style="color: lime">add</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">SessionModule</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">type</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductModel.Session.SessionModule</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">/&gt;</span>
</p>
</div>
</div>


<p>
<strong>Controller Code</strong>
</p>


<p>
Finally, since the NHibernate Session is being created / closed in the HTTP Module, I no longer have to use the <em>using</em> statement in every controller. Instead, I&#39;m just setting a ISession = to the SessionManagers Current session.
</p>


<div class="code">
<!--
{\rtf1\ansi\ansicpg\lang1024\noproof65001\uc1 \deff0{\fonttbl{\f0\fnil\fcharset0\fprq1 Monaco;}}{\colortbl;??\red255\green255\blue255;\red27\green27\blue27;\red35\green180\blue235;\red71\green179\blue209;\red165\green163\blue163;\red43\green145\blue175;\red128\green255\blue0;}??\fs18 \cf1\cb2\highlight2         \cf3 public\cf1  \cf4 ActionResult\cf1  \cf5 AddProduct\cf1 (\cf3 string\cf1  \cf5 ID\cf1 )\par ??        \{\par ??            \cf6 ISession\cf1  \cf5 session\cf1  = \cf4 SessionManager\cf1 .\cf5 GetCurrentSession\cf1 ();\par ??            \cf3 return\cf1  \cf5 RenderView\cf1 (\cf7 "AddProduct"\cf1 ,\par ??                \cf3 new\cf1  \cf4 SimpleProductRepository\cf1 (\cf5 session\cf1 ).\cf5 List\cf1 ());\par ??        \}}
-->
<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Monaco; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px">
&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #47b3d1">ActionResult</span> <span style="color: #a5a3a3">AddProduct</span>(<span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">ID</span>)
</p>
<p style="margin: 0px">
&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #2b91af">ISession</span> <span style="color: #a5a3a3">session</span> = <span style="color: #47b3d1">SessionManager</span>.<span style="color: #a5a3a3">GetCurrentSession</span>();
</p>
<p style="margin: 0px">
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">return</span> <span style="color: #a5a3a3">RenderView</span>(<span style="color: #80ff00">&quot;AddProduct&quot;</span>,
</p>
<p style="margin: 0px">
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">new</span> <span style="color: #47b3d1">SimpleProductRepository</span>(<span style="color: #a5a3a3">session</span>).<span style="color: #a5a3a3">List</span>());
</p>
<p style="margin: 0px">
&nbsp;&nbsp; }
</p>
</div>
</div>


<p>
<strong>Wrapping Up</strong>
</p>


<p>
There&#39;s still a bit more I want to explore with this method of Session Management (maybe transactions). Also I would be interested to test out the threading / performance implications of going this route. I&#39;ve updated the code on my assembla site. If you&#39;re interested, you can check it out here <a href="http://svn2.assembla.com/svn/NHibernateTest/" target="_blank">http://svn2.assembla.com/svn/NHibernateTest/</a> (keep in mind it&#39;s demo code &#8211; not anything remotely resembling anything I would use in production). I would really appreciate any suggestions / feedback that you may have!
</p>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/04/30/using-nhibernate-years-after-i-should-have-been/">Using NHibernate (Years After I Should Have Been)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-30T06:52:00-04:00" pubdate data-updated="true">Apr 30<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
As mentioned in my last post, I&#39;ve been starting to use <a href="http://www.hibernate.org/343.html" target="_blank">NHibernate </a>in some of my more recent projects. I checked it out years ago and I completely hated it (maybe becuase I was a newer developer &#8211; not totally sure). More recently, however, I&#39;ve realized some of the benefits of <a href="http://www.domaindrivendesign.org/" target="_blank">Domain Driven Design</a> and thought its about time to give Hibernate another shot. I&#39;m admittedly pretty new to Hibernate so any feedback would be appreciated! 
</p>


<p>
<strong>Classes</strong>&nbsp;
</p>


<div style="margin: 0px; padding: 0px; background: #1b1b1b none repeat scroll 0% 50%; font-family: Consolas; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">ProductGroup</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">ProductGroupID</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">Title</span>{ <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>;}
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #2b91af">IList</span>&lt;<span style="color: #47b3d1">SimpleProduct</span>&gt; <span style="color: #a5a3a3">Products</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p>
&nbsp;&nbsp;&nbsp; }&nbsp;
</p>
</div>


<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Consolas; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">SimpleProduct</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">private</span> <span style="color: #2b91af">IList</span>&lt;<span style="color: #47b3d1">SimpleProduct</span>&gt; <span style="color: #a5a3a3">_relatedProducts</span>;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">ID</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">Title</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">ImagePath</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">Description</span> { <span style="color: #23b4eb">get</span>; <span style="color: #23b4eb">set</span>; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #2b91af">IList</span>&lt;<span style="color: #47b3d1">SimpleProduct</span>&gt; <span style="color: #a5a3a3">RelatedProducts</span> 
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; { 
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">get</span>{ <span style="color: #23b4eb">return</span> <span style="color: #a5a3a3">_relatedProducts</span>; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">private</span> <span style="color: #23b4eb">set</span> { <span style="color: #a5a3a3">_relatedProducts</span> = <span style="color: #23b4eb">value</span>;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">virtual</span> <span style="color: #23b4eb">void</span> <span style="color: #a5a3a3">AddRelatedProduct</span>(<span style="color: #47b3d1">SimpleProduct</span> <span style="color: #a5a3a3">product</span>)
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">if</span> (<span style="color: #a5a3a3">_relatedProducts</span> == <span style="color: #23b4eb">null</span>)
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_relatedProducts</span> = <span style="color: #23b4eb">new</span> <span style="color: #47b3d1">List</span>&lt;<span style="color: #47b3d1">SimpleProduct</span>&gt;();
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_relatedProducts</span>.<span style="color: #a5a3a3">Add</span>(<span style="color: #a5a3a3">product</span>);
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
</div>


<p>
We&#39;re going to start out with some very contrived classes (normally would start with tests but this is just for the hibernate concepts)&#8230; These classes should be pretty straight forward; they consist only of some basic properties and list methods. 
</p>


<p>
<strong>Data Tables&nbsp;</strong>
</p>


<p>
Next, we need to create our tables to hold the data coming from the Classes &#8211; I&#39;ve created a product table / product group table and a lookup table for both (there are many-to-many references in both SimpleProduct and ProductGroup).&nbsp;
</p>


<p>
CREATE TABLE [dbo].[SimpleProducts](<br />
&nbsp;&nbsp;&nbsp; [ProductID] [char](32) NOT NULL,<br />
&nbsp;&nbsp;&nbsp; [Title] [nvarchar](50) NOT NULL,<br />
&nbsp;&nbsp;&nbsp; [ImagePath] [nvarchar](300) NULL,<br />
&nbsp;&nbsp;&nbsp; [Description] [nvarchar](500) NULL<br />
)<br />
&nbsp;&nbsp;&nbsp; <br />
CREATE TABLE [dbo].[RelatedProductsLookup](<br />
&nbsp;&nbsp;&nbsp; [ProductID] [char](32) NOT NULL,<br />
&nbsp;&nbsp;&nbsp; [RelatedProductID] [char](32) NOT NULL<br />
)<br />
<br />
CREATE TABLE [dbo].[ProductsProductGroupsLookup](<br />
&nbsp;&nbsp;&nbsp; [ProductGroupID] [char](32) NULL,<br />
&nbsp;&nbsp;&nbsp; [ProductID] [char](32) NULL<br />
)<br />
<br />
CREATE TABLE [dbo].[ProductGroups](<br />
&nbsp;&nbsp;&nbsp; [ProductGroupID] [char](32) NOT NULL,<br />
&nbsp;&nbsp;&nbsp; [Title] [nvarchar](50) NULL<br />
)&nbsp;&nbsp;&nbsp;&nbsp; 
</p>


<p>
&nbsp;You will want to set the Primary Key of the SimpleProduct and Product Groups table to be the ID.&nbsp;
</p>


<p>
<strong>Hibernate Mappings</strong>
</p>


<p>
Next we&#39;re on to the Hibernate mapping files. These files link the columns in the database to the fields/properties in the domain classes. Please check the <a href="http://www.hibernate.org/hib_docs/nhibernate/1.2/reference/en/html/" target="_blank">project documentation</a> for more detailed information on the Hibernate Schemas.
</p>


<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Consolas; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&lt;?</span><span style="color: lime">xml</span><span style="color: #88d0e8"> </span><span style="color: #cecece">version</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">1.0</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">encoding</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">utf-8</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> ?&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&lt;</span><span style="color: lime">hibernate-mapping</span><span style="color: #88d0e8"> </span><span style="color: #cecece">xmlns</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">urn:nhibernate-mapping-2.2</span><span style="color: fuchsia">&quot;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span style="color: #cecece">namespace</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductModel</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">assembly</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductModel</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">default-lazy</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">false</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &lt;</span><span style="color: lime">class</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductGroup</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">table</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductGroups</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;</span><span style="color: lime">id</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductGroupID</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">column</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductGroupID</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">sql-type</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">char(32)</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">not-null</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">true</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">generator</span><span style="color: #88d0e8"> </span><span style="color: #cecece">class</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">uuid.hex</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;/</span><span style="color: lime">id</span><span style="color: #88d0e8">&gt;&nbsp; &nbsp; </span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;</span><span style="color: lime">property</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">Title</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">column</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">Title</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">length</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">50</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">not-null</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">true</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;/</span><span style="color: lime">property</span><span style="color: #88d0e8">&gt;&nbsp; &nbsp; </span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;</span><span style="color: lime">bag</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">Products</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&nbsp; </span><span style="color: #cecece">table</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductsProductGroupsLookup</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">lazy</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">false</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">key</span><span style="color: #88d0e8"> </span><span style="color: #cecece">column</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductGroupID</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">many-to-many</span><span style="color: #88d0e8"> </span><span style="color: #cecece">class</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">SimpleProduct</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">column</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductID</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;&nbsp; &nbsp; &nbsp; </span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;/</span><span style="color: lime">bag</span><span style="color: #88d0e8">&gt;&nbsp; &nbsp; &nbsp; &nbsp; </span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &lt;/</span><span style="color: lime">class</span><span style="color: #88d0e8">&gt;&nbsp; </span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&lt;/</span><span style="color: lime">hibernate-mapping</span><span style="color: #88d0e8">&gt;</span>
</p>
</div>


<p>
Inside the hibernate mapping tag, we have an element called class where we&#39;re defining the relationship between the class and the table in the database. From there we&#39;re defining the properties &#8211; Most of this should be pretty straight forward but there are a couple things I would like to focus on.&nbsp;
</p>


<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Consolas; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;</span><span style="color: lime">id</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductGroupID</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">column</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductGroupID</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">sql-type</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">char(32)</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">not-null</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">true</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">generator</span><span style="color: #88d0e8"> </span><span style="color: #cecece">class</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">uuid.hex</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;/</span><span style="color: lime">id</span><span style="color: #88d0e8">&gt;&nbsp; &nbsp; </span>
</p>
</div>


<p>
&nbsp;This node is defining the unique ID for the class &#8211; the ID is being created for each item and looks a little something like this: <em>46abbefc08d14b49a5d15c8a4dd69ff2 </em>
</p>


<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Consolas; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;</span><span style="color: lime">bag</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">Products</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&nbsp; </span><span style="color: #cecece">table</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductsProductGroupsLookup</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">lazy</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">false</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">key</span><span style="color: #88d0e8"> </span><span style="color: #cecece">column</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductGroupID</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">many-to-many</span><span style="color: #88d0e8"> </span><span style="color: #cecece">class</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">SimpleProduct</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">column</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductID</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;&nbsp; &nbsp; &nbsp; </span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;/</span><span style="color: lime">bag</span><span style="color: #88d0e8">&gt;&nbsp; &nbsp; &nbsp; &nbsp; </span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &lt;/</span><span style="color: lime">class</span><span style="color: #88d0e8">&gt;&nbsp; </span>
</p>
</div>


<p>
Here we&#39;re defining a many-to-many relationship with Products &#8211; this is bumping up against the lookup table we defined earlier to get all SimpleProducts associated with this class. currently the bag is defining a many-to-many relationship. We&#39;re going to assume that a product can exist under any number of product groups &#8211; for instance if we have a video game system it could be under both the Home Entertainment and Electronics product group. See the <a href="http://www.hibernate.org/hib_docs/nhibernate/1.2/reference/en/html/" target="_blank">project documentation</a> for other types of relationships (one-to-many, etc).
</p>


<p>
SimpleProduct Mapping:
</p>


<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Consolas; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&lt;?</span><span style="color: lime">xml</span><span style="color: #88d0e8"> </span><span style="color: #cecece">version</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">1.0</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">encoding</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">utf-8</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> ?&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&lt;</span><span style="color: lime">hibernate-mapping</span><span style="color: #88d0e8"> </span><span style="color: #cecece">xmlns</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">urn:nhibernate-mapping-2.2</span><span style="color: fuchsia">&quot;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span style="color: #cecece">namespace</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductModel</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">assembly</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductModel</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">default-lazy</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">false</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &lt;</span><span style="color: lime">class</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">SimpleProduct</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">table</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">SimpleProducts</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;</span><span style="color: lime">id</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ID</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">column</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductID</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">sql-type</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">char(32)</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">not-null</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">true</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">generator</span><span style="color: #88d0e8"> </span><span style="color: #cecece">class</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">uuid.hex</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;/</span><span style="color: lime">id</span><span style="color: #88d0e8">&gt;&nbsp; &nbsp; </span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;</span><span style="color: lime">property</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">Title</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">column</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">Title</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">length</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">50</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">not-null</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">true</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;/</span><span style="color: lime">property</span><span style="color: #88d0e8">&gt;&nbsp; &nbsp; </span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;</span><span style="color: lime">property</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ImagePath</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">column</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ImagePath</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">length</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">300</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">not-null</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">false</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;/</span><span style="color: lime">property</span><span style="color: #88d0e8">&gt;&nbsp; &nbsp; </span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;</span><span style="color: lime">property</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">Description</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">column</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">Description</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">length</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">500</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">not-null</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">false</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;/</span><span style="color: lime">property</span><span style="color: #88d0e8">&gt;&nbsp; &nbsp; &nbsp; &nbsp; </span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;</span><span style="color: lime">bag</span><span style="color: #88d0e8"> </span><span style="color: #cecece">name</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">RelatedProducts</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&nbsp; </span><span style="color: #cecece">table</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">RelatedProductsLookup</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">lazy</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">false</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8">&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">key</span><span style="color: #88d0e8"> </span><span style="color: #cecece">column</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">ProductID</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;</span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: lime">many-to-many</span><span style="color: #88d0e8"> </span><span style="color: #cecece">class</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">SimpleProduct</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> </span><span style="color: #cecece">column</span><span style="color: #88d0e8">=</span><span style="color: fuchsia">&quot;</span><span style="color: #cecece">RelatedProductID</span><span style="color: fuchsia">&quot;</span><span style="color: #88d0e8"> /&gt;&nbsp; &nbsp; &nbsp; </span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &nbsp; &lt;/</span><span style="color: lime">bag</span><span style="color: #88d0e8">&gt;&nbsp; &nbsp; &nbsp; &nbsp; </span>
</p>
<p style="margin: 0px; padding: 0px">
<span style="color: #88d0e8">&nbsp; &lt;/</span><span style="color: lime">class</span><span style="color: #88d0e8">&gt;&nbsp; </span>
</p>
<p>
<span style="color: #88d0e8">&lt;/</span><span style="color: lime">hibernate-mapping</span><span style="color: #88d0e8">&gt;</span><br />
&nbsp;
</p>
</div>


<p>
&nbsp;
</p>


<p>
<strong>Accessing The Data</strong>
</p>


<p>
Now that we&#39;ve defined all of our mappings its time to create some methods to access our data.
</p>


<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Consolas; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">ProductGroupRepository</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">private</span> <span style="color: #2b91af">ISession</span> <span style="color: #a5a3a3">_session</span>;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #a5a3a3">ProductGroupRepository</span>(<span style="color: #2b91af">ISession</span> <span style="color: #a5a3a3">session</span>)
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_session</span> = <span style="color: #a5a3a3">session</span>;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #47b3d1">ProductGroup</span> <span style="color: #a5a3a3">GetByTitle</span>(<span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">Title</span>)
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">return</span> <span style="color: #a5a3a3">_session</span>.<span style="color: #a5a3a3">CreateCriteria</span>(<span style="color: #23b4eb">typeof</span>(<span style="color: #47b3d1">ProductGroup</span>))
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .<span style="color: #a5a3a3">Add</span>(<span style="color: #47b3d1">Expression</span>.<span style="color: #a5a3a3">Eq</span>(<span style="color: #80ff00">&quot;Title&quot;</span>, <span style="color: #a5a3a3">Title</span>))
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .<span style="color: #a5a3a3">UniqueResult</span>&lt;<span style="color: #47b3d1">ProductGroup</span>&gt;();
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #2b91af">IList</span>&lt;<span style="color: #47b3d1">ProductGroup</span>&gt; <span style="color: #a5a3a3">List</span>()
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">return</span> <span style="color: #a5a3a3">_session</span>.<span style="color: #a5a3a3">CreateCriteria</span>(<span style="color: #23b4eb">typeof</span>(<span style="color: #47b3d1">ProductGroup</span>))
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .<span style="color: #a5a3a3">List</span>&lt;<span style="color: #47b3d1">ProductGroup</span>&gt;();
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
</div>


<p>
&nbsp;
</p>


<p>
The ISession is the Hibernate object to use when accessing the data &#8211; from what it looks like, these should pretty much line up with a unit of work (<a href="http://blogs.hibernatingrhinos.com/nhibernate/archive/2008/04/10/nhibernate-and-the-unit-of-work-pattern.aspx" target="_blank">More on that here).</a> 
</p>


<p>
In the other methods of the class, we first need to define what type of object we&#39;re looking for. In case it&#39;s not obvious, we&#39;re specifying that in the CreateCriteria section. In the List() method, we&#39;re returning a list (of ProductGroups) &#8211; there are no filters or other criteria defined for this operation. In the GetByTitle() method, however,&nbsp; we&#39;re stating that the Title for the product must match the Parameter &#39;Title&#39;. 
</p>


<p>
<strong>Demo Application</strong>
</p>


<p>
I&#39;ve created a quick demo application using MVC and NHibernate. As I said, I&#39;m still very new to hibernate so there&#39;s a lot I&#39;m trying to learn (for instance<a href="/ryanlanciaux.com/post/NHibernate-in-an-ASPNET-MVC-application.aspx" target="_blank"> where the ISession should initially be created and closed in an MVC application</a>). Please let me know of any way that this could be better &#8211; generally I&#39;m writing this to help solidfy my thoughts on the technology, help others (hopefully) and also improve from others feedback.&nbsp;
</p>


<p>
Disclaimer: Use this code at your own risk.&nbsp;
</p>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/04/29/nhibernate-in-an-asp-net-mvc-application/">NHibernate in an ASP.NET MVC Application</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-29T22:45:00-04:00" pubdate data-updated="true">Apr 29<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
I&#39;ve recently become interested in using <a href="http://www.hibernate.org/343.html" target="_blank">NHibernate </a>for some of my data access. For the past year or
so I have been using <a href="http://subsonicproject.com/" target="_blank">SubSonic </a>for that, however, I&#39;m trying to take a bit
more of a domain driven approach on the project I&#39;m currently messing around on. Although I&#39;ve only been looking at it for a couple of days, one thing I&#39;m having a little bit of trouble figuring out is where my ISession should be opened / closed in an ASP.NET MVC application. Currently, I&#39;m doing this in the Controller but I&#39;m not totally sure that is the right way to go&#8230;
</p>


<div style="background: #1b1b1b none repeat scroll 0% 50%; -moz-background-inline-policy: -moz-initial; font-family: Consolas; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; width: 600px">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #47b3d1">ActionResult</span> <span style="color: #a5a3a3">ViewProduct</span>(<span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">ID</span>)
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">using</span> (<span style="color: #2b91af">ISession</span> <span style="color: #a5a3a3">session</span> = <span style="color: #47b3d1">SessionManager</span>.<span style="color: #a5a3a3">GetCurrentSession</span>())
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #47b3d1">SimpleProductRepository</span> <span style="color: #a5a3a3">repo</span> = <span style="color: #23b4eb">new</span> <span style="color: #47b3d1">SimpleProductRepository</span>(<span style="color: #a5a3a3">session</span>);
</p>
<p style="margin: 0px">
&nbsp;
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">return</span> <span style="color: #a5a3a3">RenderView</span>(<span style="color: #80ff00">&quot;ViewProduct&quot;</span>,
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">new</span> <span style="color: #47b3d1">SimpleProductRepository</span>(<span style="color: #a5a3a3">session</span>).<span style="color: #a5a3a3">GetByTitle</span>(<span style="color: #a5a3a3">ID</span>));
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }&nbsp;
</p>
</div>


<br />


<p>What is the best way to go about this? Also, should I be looking more at using a <a href="http://blogs.hibernatingrhinos.com/nhibernate/archive/2008/04/10/nhibernate-and-the-unit-of-work-pattern.aspx" target="_blank">Unit of Work</a> pattern to achieve this?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/04/12/ie8-vs-firefox-3-0b5-javascript-part-1/">IE8 vs Firefox 3.0b5 JavaScript Part 1</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-12T23:24:00-04:00" pubdate data-updated="true">Apr 12<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
Last time I posted on the latest browser from Microsoft vs. Mozilla&#39;s latest I had compared page download times between the two browsers. This time, I would like to take a brief look at how they stack up in regard to JavaScript. 
</p>


<p>
<a href="http://ejohn.org/" target="_blank">John Resig</a> (of <a href="http://www.jquery.com" target="_blank">jQuery </a>/ <a href="http://www.mozilla.org">Mozilla </a>fame) announced the <a href="http://dromaeo.com/" target="_blank">Dromaeo: Javascript Performance Testing</a> suite yesterday. The suite runs some of the same tests as the <a href="http://webkit.org/" target="_blank">WebKit </a>team&#39;s <a href="http://webkit.org/perf/sunspider-0.9/sunspider.html" target="_blank">SunSpider</a>, however, there are some improved methodolgies (see the suite&#39;s <a href="http://wiki.mozilla.org/Dromaeo" target="_blank">wiki </a>for more info on this). I don&#39;t know how often I feel like doing DNA Sequence Alignment in JavaScript but I think it would be a good way to quickly get some metrics of how both FireFox and IE8 handle the code.
</p>


<h2>The Comparison:</h2>


<p>
I ran the tests in groups because there were certain ones that were not finishing under IE8. To be quite honest, I&#39;m not 100% sure if this is an Internet Explorer issue, or an issue with the tests. Both are a work in progress so I would rather not make assumptions at this point. Anyways, the results of the tests are listed below: 
</p>


<table border="1" style="border: 1px none ; border-spacing: 0px">
    <tbody>
        <tr>
            <th>Test Name <br />
            </th>
            <th>Firefox 3.0 beta 5</th>
            <th>Internet Explorer 8</th>
        </tr>
        <tr>
            <td>Fannkuch v122</td>
            <td>802.80ms</td>
            <td>1032.20ms</td>
        </tr>
        <tr>
            <td>Base 64 Encoding and Decoding v122:</td>
            <td>2942.00ms</td>
            <td>Would not finish</td>
        </tr>
        <tr>
            <td>DNA Sequence Alignment v116:</td>
            <td>420.00ms</td>
            <td>Would not finish</td>
        </tr>
        <tr>
            <td>N-Body Rotation and Gravity v122:</td>
            <td>270ms</td>
            <td>529.40ms</td>
        </tr>
        <tr>
            <td>Prime Number Computation (2) v122:</td>
            <td>305.80ms</td>
            <td>518.20ms</td>
        </tr>
        <tr>
            <td>Recursive Number Calculation v122:</td>
            <td>184.40ms</td>
            <td>417.80ms</td>
        </tr>
        <tr>
            <td>Traversing Binary Trees v122:</td>
            <td>156.80ms</td>
            <td>422.20ms</td>
        </tr>
    </tbody>
</table>


<br />


<h2>The Results</h2>


<p>
The initial results look like Firefox is performing the more advanced Javascript operations faster than Internet Explorer. That being said, Dromaeo, IE8 and Firefox 3.0b5 are still being developed so a lot could change before the release. For more metrics <a href="http://dromaeo.com/?id=250,246,251,256" target="_blank">view a comparison</a> on the Dromaeo site of Safari 3.1, Firefox 3.0b5, Opera 9.5 and IE8b1. Let me know what you think or if you&#39;ve encountered different results.
</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/04/02/browser-beta-battle-ie8-vs-firefox-3-0b5/">Browser Beta Battle - IE8 vs Firefox 3.0b5</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-02T22:38:00-04:00" pubdate data-updated="true">Apr 2<span>nd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
After reading <a href="http://www.stevesouders.com/" target="_blank">Steve Souders&#39;</a> article on <a href="http://www.stevesouders.com/blog/2008/03/10/ie8-speeds-things-up/" target="_blank">IE8 speed enhancements</a>, I became curious about how page download times in <a href="http://www.microsoft.com/windows/products/winfamily/ie/ie8/default.mspx" target="_blank">IE8</a> stacked up against the latest beta of <a href="http://www.mozilla.com/en-US/firefox/all-beta.html" target="_blank">Firefox (3.0b5)</a>. I realize that both of these browsers are in beta so the release product may be signficantly different. Also, please keep in mind these results are not very scientific (obviously). To obtain download times, I used <a href="http://www.fiddlertool.com/fiddler/" target="_blank">Fiddler</a> for <a href="http://www.microsoft.com/windows/products/winfamily/ie/ie8/default.mspx" target="_blank">Internet Explorer</a> and <a href="https://addons.mozilla.org/en-US/firefox/addon/1843" target="_blank">Firebug </a>for <a href="http://www.mozilla.com/en-US/firefox/all-beta.html" target="_blank">Firefox</a>.
</p>


<p>
First off, I loaded a several higher volume websites to compare page download times. Each page was loaded three times (for extreme statistical accuracy :P) and the average load time was calculated.
</p>


<h2 style="margin: 0px; padding: 0px">
Google News</h2>


<p><a href="http://news.google.com" target="_blank">http://news.google.com </a></p>

<br />


<br />


<div style="border: 1px solid #656565; background-color: #ededed; width: 355px">
0 Javascript Requests - 0 CSS Requests - 32 Images
</div>


<table border="0">
    <tbody>
        <tr>
            <td align="right"><strong>Firefox:</strong></td>
            <td>1.08 Seconds</td>
        </tr>
        <tr>
            <td align="right"><strong>IE8:</strong></td>
            <td>2.43 Seconds</td>
        </tr>
    </tbody>
</table>


<br />


<br />


<h2 style="margin: 0px; padding: 0px">
Amazon
</h2>


<p><a href="http://www.amazon.com" target="_blank">http://www.amazon.com</a><br /></p>

<br />


<div style="border: 1px solid #656565; background-color: #ededed; width: 355px">
12 Javascript Requests - 2 CSS Requests - 96 Images
</div>


<table border="0">
    <tbody>
        <tr>
            <td align="right"><strong>Firefox:</strong></td>
            <td>5.59 Seconds</td>
        </tr>
        <tr>
            <td align="right"><strong>IE8:</strong></td>
            <td>4.86 Seconds</td>
        </tr>
    </tbody>
</table>


<br />


<br />


<h2 style="margin: 0px; padding: 0px">
Mac.com 
</h2>


<p><a href="http://www.mac.com" target="_blank">http://www.mac.com</a><br /></p>

<br />


<div style="border: 1px solid #656565; background-color: #ededed; width: 355px">
15 Javascript Requests - 6 CSS Requests - 44 Images
</div>


<table border="0">
    <tbody>
        <tr>
            <td align="right"><strong>Firefox:</strong></td>
            <td>5.74 Seconds</td>
        </tr>
        <tr>
            <td align="right"><strong>IE8:</strong></td>
            <td>4.52 Seconds</td>
        </tr>
    </tbody>
</table>


<br />


<br />


<p>
Finally, I ran <a href="http://stevesouders.com/hpws/parallel-downloads.php" target="_blank">Steve Souders&#39; Parellel downloads test</a>; the results were almost identical.
</p>


<table border="0" style="border: 1px solid ">
    <tbody>
        <tr>
            <td bgcolor="#ededed"><strong>Firefox</strong></td>
        </tr>
        <tr>
            <td><img src="/files/firefox.gif" alt="" /></td>
        </tr>
    </tbody>
</table>


<br />


<table border="0" style="border: 1px solid ">
    <tbody>
        <tr>
            <td bgcolor="#ededed"><strong>Internet Explorer</strong></td>
        </tr>
        <tr>
            <td><img src="/files/ie8.gif" alt="" /></td>
        </tr>
    </tbody>
</table>


<br />


<br />


<p>
It was really odd to me that Google News loaded almost two times as fast on Firefox while all the other sites loaded close to the same speed or slightly faster on Internet Explorer. The only difference I notice off the bat is the number of JS/CSS files; maybe its something to do with that? It would be very interesting to see how the browsers compare when rendering pages. Have you found results similar to this or know of a good way to test render time? Let me know what you think.
</p>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/26/real-ultimate-power-dependency-injection-with-ninject/">Real Ultimate Power Dependency Injection With Ninject</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-26T23:02:00-04:00" pubdate data-updated="true">Mar 26<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div style="padding: 10px; float: right">
<img src="/files/ninja.jpg" alt="Ninja" />
</div>


<div style="border: 1px solid #656565; background-color: #ededed; width: 350px">
<strong>UPDATE:</strong> <a href="http://kohari.org/" target="_blank">Nate Kohari</a> (the author of <a href="http://ninject.org/" target="_blank">Ninject</a>) posted some excellent information in the comments (enough info that it could probably be a post on its own).
</div>


<br />


<p>Recently
<a href="http://www.hanselman.com/blog/" target="_blank">Scott Hanselman</a> compiled a <a href="http://www.hanselman.com/blog/ListOfNETDependencyInjectionContainersIOC.aspx" target="_blank">list of Dependency Injection frameworks</a> for .NET. I
really didn&#39;t plan on trying anything new but <a href="http://ninject.org/" target="_blank">Ninject</a> really jumped out
at me (honestly, it was more the reference to ninjas than anything).
After seeing a couple examples, I thought I would check it out in a bit
more detail. <br /></p>

<br />


<blockquote>
    Disclaimer: I&#39;ve been playing
    around with Ninject for all of about 3 hours now &#8230; it&#39;s very possible
    there&#39;s a better way to do some of this stuff :) So I would really
    appreciate any feedback.<br />
</blockquote>


<br />


<p><span><strong>On to the code</strong></span><br /></p>

<br />


<p>Okay,
for this very contrived example we&#39;re going to be building car objects
out of just an engine and a drive type (extremely accurate I know). Just like in my StructureMap example, I&#39;m going to start by creating
the interfaces followed by a default class that we&#39;re going to use as
our skeleton car &#8230; the interfaces are pretty basic so no need to
spend too much time on them.<br /></p>

<br />


<div style="background: #1b1b1b none repeat scroll 0% 50%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial; font-family: Consolas; font-size: 9pt; color: white; max-width: 400px">
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">interface</span> <span style="color: #2b91af">IDriveType</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">DriveType</span>{ <span style="color: #23b4eb">get</span>;}
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">interface</span> <span style="color: #2b91af">IEngine</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">EngineType</span> { <span style="color: #23b4eb">get</span>; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
</div>


<br />


<br />


<p>Both
of the interfaces have only one string property that will be used for
output. A little on the basic side but hey, we&#39;re looking at IoC not an
accurate car construction. Next we&#39;re going to add all our
implementations of the Engine <br /></p>

<br />


<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Consolas; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial; max-width: 400px">
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">FourCylinder</span> : <span style="color: #2b91af">IEngine</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">EngineType</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">get</span> { <span style="color: #23b4eb">return</span> <span style="color: #80ff00">&quot;4-Cylinder&quot;</span>; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">Rotary</span> : <span style="color: #2b91af">IEngine</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">EngineType</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">get</span> { <span style="color: #23b4eb">return</span> <span style="color: #80ff00">&quot;Rotary&quot;</span>; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">SixCylinder</span> : <span style="color: #2b91af">IEngine</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">EngineType</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">get</span> { <span style="color: #23b4eb">return</span> <span style="color: #80ff00">&quot;6-Cylinder&quot;</span>; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
</div>


<br />


<br />


<p>And the drive type implementations&#8230;<br /></p>

<br />


<div style="background: #1b1b1b none repeat scroll 0% 50%; overflow: hidden; font-family: Consolas; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial; max-width: 400px">
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">RWD</span> : <span style="color: #2b91af">IDriveType</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">DriveType</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">get</span> { <span style="color: #23b4eb">return</span> <span style="color: #80ff00">&quot;Rear Wheel Drive&quot;</span>; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">FourWD</span> : <span style="color: #2b91af">IDriveType</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">DriveType</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">get</span> { <span style="color: #23b4eb">return</span> <span style="color: #80ff00">&quot;Four Wheel Drive&quot;</span>; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">FWD</span> : <span style="color: #2b91af">IDriveType</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">DriveType</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">get</span> { <span style="color: #23b4eb">return</span> <span style="color: #80ff00">&quot;Front wheel drive&quot;</span>; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
</div>


<br />


<br />


<p>And finally the class we&#39;re going to use as our base car.<br /></p>

<br />


<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Consolas; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">BaseAuto</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">private</span> <span style="color: #2b91af">IDriveType</span> <span style="color: #a5a3a3">_driveType</span>;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">private</span> <span style="color: #2b91af">IEngine</span> <span style="color: #a5a3a3">_engine</span>;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">DriveType</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">get</span> { <span style="color: #23b4eb">return</span> <span style="color: #a5a3a3">_driveType</span>.<span style="color: #a5a3a3">DriveType</span>; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">string</span> <span style="color: #a5a3a3">Engine</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">get</span> { <span style="color: #23b4eb">return</span> <span style="color: #a5a3a3">_engine</span>.<span style="color: #a5a3a3">EngineType</span>; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [<span style="color: #47b3d1">Inject</span>]
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #a5a3a3">BaseAuto</span>(<span style="color: #2b91af">IDriveType</span> <span style="color: #a5a3a3">drive</span>, <span style="color: #2b91af">IEngine</span> <span style="color: #a5a3a3">engine</span>)
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_driveType</span> = <span style="color: #a5a3a3">drive</span>;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_engine</span> = <span style="color: #a5a3a3">engine</span>;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
</div>


<br />


<br />


<p>You&#39;ll
notice the <strong>[Inject]</strong> attribute above our constructor. This is basically
telling Ninject to toss in an implementation of the IDriveType and
IEngine interfaces to this constructor (more on&nbsp; <a href="http://www.martinfowler.com/articles/injection.html">Constructor Injection over here</a>). <br /></p>

<br />


<p>Now we&#39;re on to the
fun stuff. Ninject does not use XML to configure injections. Instead
we&#39;re going to use a class called Module to define all that. As the
<a href="http://ninject.org/users-guide.html" target="_blank">documentation</a> says, this class should implement IModule but thankfully
(at least for the sake of testing), there&#39;s a pre-defined base
implementation called StandardModule that we can extend. <br /></p>

<br />


<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Consolas; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">BaseModule</span> : <span style="color: #47b3d1">StandardModule</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">override</span> <span style="color: #23b4eb">void</span> <span style="color: #a5a3a3">Load</span>()
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">Bind</span>&lt;<span style="color: #2b91af">IEngine</span>&gt;().<span style="color: #a5a3a3">To</span>&lt;<span style="color: #47b3d1">Rotary</span>&gt;();
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">Bind</span>&lt;<span style="color: #2b91af">IDriveType</span>&gt;().<span style="color: #a5a3a3">To</span>&lt;<span style="color: #47b3d1">RWD</span>&gt;();
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
</div>


<br />


<br />


<p>In
the module definition, we&#39;re basically saying when we request an object
from the Kernel (more on that in a sec.) we want the Rotary class in
place of IEngine and the RWD instead of IDriveType. Simple enough, now
lets take a look at the Kernel definition / initial code (I&#39;m using
winforms for the sake of example but you can really go w/ whatever
project type you&#39;d like). A lot of thought went into the naming of the form.<br /></p>

<br />


<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Consolas; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">partial</span> <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">Form1</span> : <span style="color: #47b3d1">Form</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">private</span> <span style="color: #47b3d1">BaseAuto</span> <span style="color: #a5a3a3">_rx8</span>;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #a5a3a3">Form1</span>()
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">InitializeComponent</span>();
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #2b91af">IKernel</span> <span style="color: #a5a3a3">kernel</span> = <span style="color: #23b4eb">new</span> <span style="color: #47b3d1">StandardKernel</span>(<span style="color: #23b4eb">new</span> <span style="color: #47b3d1">BaseModule</span>());
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_rx8</span> = <span style="color: #23b4eb">new</span> <span style="color: #47b3d1">BaseAuto</span>(
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">kernel</span>.<span style="color: #a5a3a3">Get</span>&lt;<span style="color: #a5a3a3">Auto</span>.<span style="color: #2b91af">IDriveType</span>&gt;(),
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">kernel</span>.<span style="color: #a5a3a3">Get</span>&lt;<span style="color: #a5a3a3">Auto</span>.<span style="color: #2b91af">IEngine</span>&gt;()
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; );
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #47b3d1">MessageBox</span>.<span style="color: #a5a3a3">Show</span>(<span style="color: #80ff00">&quot;RX8: \n Drive Type: &quot;</span> + <span style="color: #a5a3a3">_rx8</span>.<span style="color: #a5a3a3">DriveType</span> + 
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #80ff00">&quot;\n Engine:&quot;</span> + <span style="color: #a5a3a3">_rx8</span>.<span style="color: #a5a3a3">Engine</span>);
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
</div>


<br />


<br />


<p>And when we run it&#8230;<br /></p>

<br />


<p><img src="/files/rx-8+working.gif" alt="" /><br /></p>

<br />


<p>Just
what we expected! Lets make things a little more interesting &#8230; Say we wanted to add some other cars to our application? We probably
don&#39;t want everything to be a rear-wheel drive rotary (Unless you
really like RX-8&#39;s &#8211; in that case you can <a href="http://www.frickinsweet.com" target="_blank">buy my RX8</a> <em>shameless plug</em>).
Anyways, we&#39;re going to accomplish this by changing up our Module a bit
to bind to a different IEngine / IDriveType implementation depending on
the <a href="http://kohari.org/2008/03/13/context-variables-in-ninject/" target="_blank">context</a>. <br /></p>

<br />


<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Consolas; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">class</span> <span style="color: #47b3d1">BaseModule</span> : <span style="color: #47b3d1">StandardModule</span>
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #23b4eb">override</span> <span style="color: #23b4eb">void</span> <span style="color: #a5a3a3">Load</span>()
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">Bind</span>&lt;<span style="color: #2b91af">IEngine</span>&gt;().<span style="color: #a5a3a3">To</span>&lt;<span style="color: #47b3d1">Rotary</span>&gt;()
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .<span style="color: #a5a3a3">Only</span>(<span style="color: #47b3d1">When</span>.<span style="color: #a5a3a3">Context</span>.<span style="color: #a5a3a3">Variable</span>(<span style="color: #80ff00">&quot;carType&quot;</span>).<span style="color: #a5a3a3">EqualTo</span>(<span style="color: #80ff00">&quot;RX8&quot;</span>));&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">Bind</span>&lt;<span style="color: #2b91af">IDriveType</span>&gt;().<span style="color: #a5a3a3">To</span>&lt;<span style="color: #47b3d1">RWD</span>&gt;()
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .<span style="color: #a5a3a3">Only</span>(<span style="color: #47b3d1">When</span>.<span style="color: #a5a3a3">Context</span>.<span style="color: #a5a3a3">Variable</span>(<span style="color: #80ff00">&quot;carType&quot;</span>).<span style="color: #a5a3a3">EqualTo</span>(<span style="color: #80ff00">&quot;RX8&quot;</span>));
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">Bind</span>&lt;<span style="color: #2b91af">IEngine</span>&gt;().<span style="color: #a5a3a3">To</span>&lt;<span style="color: #47b3d1">SixCylinder</span>&gt;()
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .<span style="color: #a5a3a3">Only</span>(<span style="color: #47b3d1">When</span>.<span style="color: #a5a3a3">Context</span>.<span style="color: #a5a3a3">Variable</span>(<span style="color: #80ff00">&quot;carType&quot;</span>).<span style="color: #a5a3a3">EqualTo</span>(<span style="color: #80ff00">&quot;Jetta&quot;</span>));
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">Bind</span>&lt;<span style="color: #2b91af">IDriveType</span>&gt;().<span style="color: #a5a3a3">To</span>&lt;<span style="color: #47b3d1">FWD</span>&gt;()
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .<span style="color: #a5a3a3">Only</span>(<span style="color: #47b3d1">When</span>.<span style="color: #a5a3a3">Context</span>.<span style="color: #a5a3a3">Variable</span>(<span style="color: #80ff00">&quot;carType&quot;</span>).<span style="color: #a5a3a3">EqualTo</span>(<span style="color: #80ff00">&quot;Jetta&quot;</span>));
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">Bind</span>&lt;<span style="color: #2b91af">IEngine</span>&gt;().<span style="color: #a5a3a3">To</span>&lt;<span style="color: #47b3d1">FourCylinder</span>&gt;()
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .<span style="color: #a5a3a3">Only</span>(<span style="color: #47b3d1">When</span>.<span style="color: #a5a3a3">Context</span>.<span style="color: #a5a3a3">Variable</span>(<span style="color: #80ff00">&quot;carType&quot;</span>).<span style="color: #a5a3a3">EqualTo</span>(<span style="color: #80ff00">&quot;WRX&quot;</span>));
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">Bind</span>&lt;<span style="color: #2b91af">IDriveType</span>&gt;().<span style="color: #a5a3a3">To</span>&lt;<span style="color: #47b3d1">FourWD</span>&gt;()
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .<span style="color: #a5a3a3">Only</span>(<span style="color: #47b3d1">When</span>.<span style="color: #a5a3a3">Context</span>.<span style="color: #a5a3a3">Variable</span>(<span style="color: #80ff00">&quot;carType&quot;</span>).<span style="color: #a5a3a3">EqualTo</span>(<span style="color: #80ff00">&quot;WRX&quot;</span>)); 
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; }
</p>
</div>


<br />


<br />


<p>Not
too bad right? I mean, just looking at the code we can pretty much tell
what&#39;s going on due to the Fluent Interface goodness. We can perform
more powerful comparisons on our context variable but for now, this
will work. Next we need to set up our context in the core part of our
application <br />
(where we&#39;re instantiating and requesting classes from our Kernel).<br /></p>

<br />


<div style="background: #1b1b1b none repeat scroll 0% 50%; font-family: Consolas; font-size: 9pt; color: white; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #23b4eb">public</span> <span style="color: #a5a3a3">Form1</span>()
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">InitializeComponent</span>();
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #2b91af">IKernel</span> <span style="color: #a5a3a3">kernel</span> = <span style="color: #23b4eb">new</span> <span style="color: #47b3d1">StandardKernel</span>(<span style="color: #23b4eb">new</span> <span style="color: #47b3d1">BaseModule</span>());
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_rx8</span> = <span style="color: #23b4eb">new</span> <span style="color: #47b3d1">BaseAuto</span>(
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">kernel</span>.<span style="color: #a5a3a3">Get</span>&lt;<span style="color: #a5a3a3">Auto</span>.<span style="color: #2b91af">IDriveType</span>&gt;(
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #47b3d1">With</span>.<span style="color: #a5a3a3">Parameters</span>.<span style="color: #a5a3a3">ContextVariable</span>(<span style="color: #80ff00">&quot;carType&quot;</span>, <span style="color: #80ff00">&quot;RX8&quot;</span>)
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ),
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">kernel</span>.<span style="color: #a5a3a3">Get</span>&lt;<span style="color: #a5a3a3">Auto</span>.<span style="color: #2b91af">IEngine</span>&gt;(
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #47b3d1">With</span>.<span style="color: #a5a3a3">Parameters</span>.<span style="color: #a5a3a3">ContextVariable</span>(<span style="color: #80ff00">&quot;carType&quot;</span>, <span style="color: #80ff00">&quot;RX8&quot;</span>)
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; )
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; );
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_jetta</span> = <span style="color: #23b4eb">new</span> <span style="color: #47b3d1">BaseAuto</span>(
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">kernel</span>.<span style="color: #a5a3a3">Get</span>&lt;<span style="color: #a5a3a3">Auto</span>.<span style="color: #2b91af">IDriveType</span>&gt;(
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #47b3d1">With</span>.<span style="color: #a5a3a3">Parameters</span>.<span style="color: #a5a3a3">ContextVariable</span>(<span style="color: #80ff00">&quot;carType&quot;</span>, <span style="color: #80ff00">&quot;Jetta&quot;</span>)
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ),
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">kernel</span>.<span style="color: #a5a3a3">Get</span>&lt;<span style="color: #a5a3a3">Auto</span>.<span style="color: #2b91af">IEngine</span>&gt;(
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #47b3d1">With</span>.<span style="color: #a5a3a3">Parameters</span>.<span style="color: #a5a3a3">ContextVariable</span>(<span style="color: #80ff00">&quot;carType&quot;</span>, <span style="color: #80ff00">&quot;Jetta&quot;</span>)
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; )
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; );
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">_wrx</span> = <span style="color: #23b4eb">new</span> <span style="color: #47b3d1">BaseAuto</span>(
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">kernel</span>.<span style="color: #a5a3a3">Get</span>&lt;<span style="color: #a5a3a3">Auto</span>.<span style="color: #2b91af">IDriveType</span>&gt;(
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #47b3d1">With</span>.<span style="color: #a5a3a3">Parameters</span>.<span style="color: #a5a3a3">ContextVariable</span>(<span style="color: #80ff00">&quot;carType&quot;</span>, <span style="color: #80ff00">&quot;WRX&quot;</span>)
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ),
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #a5a3a3">kernel</span>.<span style="color: #a5a3a3">Get</span>&lt;<span style="color: #a5a3a3">Auto</span>.<span style="color: #2b91af">IEngine</span>&gt;(
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #47b3d1">With</span>.<span style="color: #a5a3a3">Parameters</span>.<span style="color: #a5a3a3">ContextVariable</span>(<span style="color: #80ff00">&quot;carType&quot;</span>, <span style="color: #80ff00">&quot;WRX&quot;</span>)
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; )
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; );
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;
</p>
<p style="margin: 0px; padding: 0px">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }
</p>
</div>


<br />


<br />


<p>I&#39;ve added some buttons so we don&#39;t get spammed with message boxes on
form load&#8230; if we fire this off and click on the various buttons, we
see we&#39;re getting the expected results!<br /></p>

<br />


<table border="0">
    <tbody>
        <tr>
            <td><img src="/files/screen.gif" alt="" /></td>
            <td><img src="/files/rx-8+working.gif" alt="" /></td>
        </tr>
        <tr>
            <td><img src="/files/jetta.gif" alt="" /></td>
            <td><img src="/files/wrx.gif" alt="" /></td>
        </tr>
    </tbody>
</table>


<p>
<br />
All in all, I&#39;m liking Ninject for more than just the name &#8211; I can definitely
see myself using this in small to medium sized apps. Please let me know
what you think&#8230;
</p>


<p>
More info on Ninject:
</p>


<ul>
    <li><a href="http://ninject.org/" target="_blank">Project Site</a></li>
    <li><a href="http://groups.google.com/group/ninject" target="_blank">Google Group</a></li>
    <li><a href="http://www.jaltiere.com/?p=23" target="_blank">Jack Altiere on Learning Dependency Injection</a></li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2011/08/14/gherkin-style-bdd-testing-in-net/">Gherkin style BDD testing in .NET</a>
      </li>
    
      <li class="post">
        <a href="/blog/2009/08/07/beginning-asp-net-mvc-1-0-available-on-amazon/">Beginning ASP.NET MVC 1.0 available on Amazon</a>
      </li>
    
      <li class="post">
        <a href="/blog/2009/03/24/are-you-a-control-freak/">Are you a Control Freak?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2008/12/12/what-constitutes-ethical-seo/">What Constitutes Ethical SEO?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2008/09/21/what-is-your-strategy-for-becoming-a-better-developer/">What is your strategy for becoming a better developer?</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/ryanlanciaux">@ryanlanciaux</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'ryanlanciaux',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Ryan Lanciaux -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
